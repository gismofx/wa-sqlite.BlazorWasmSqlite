(()=>{"use strict";var t={77:(t,e,n)=>{t.exports=n.p+"f15c5abb5734f68d0037.wasm"}},e={};function __webpack_require__(n){var r=e[n];if(void 0!==r)return r.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=t,__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t})(),__webpack_require__.b=document.baseURI||self.location.href;(()=>{var t;const e=(t="file:///C:/Users/chadp/source/repos/wa-sqlite.BlazorWasmSqlite/wa-sqlite.BlazorWasmSqlite/NpmJS/node_modules/wa-sqlite/dist/wa-sqlite-async.mjs",function(e={}){var n,r,i=e;i.ready=new Promise(((t,e)=>{n=t,r=e}));var o,s=Object.assign({},i),l="./this.program",ea=(t,e)=>{throw e},f="object"==typeof window,_="function"==typeof importScripts,w="";(f||_)&&(_?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),t&&(w=t),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_&&(o=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var m,p=i.print||console.log.bind(console),y=i.printErr||console.error.bind(console);Object.assign(i,s),s=null,i.thisProgram&&(l=i.thisProgram),i.quit&&(ea=i.quit),i.wasmBinary&&(m=i.wasmBinary);var g=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&u("no native wasm support detected");var v,E,x,q,k,A,D,C,U,O=!1;function ra(){var t=v.buffer;i.HEAP8=x=new Int8Array(t),i.HEAP16=k=new Int16Array(t),i.HEAPU8=q=new Uint8Array(t),i.HEAPU16=new Uint16Array(t),i.HEAP32=A=new Int32Array(t),i.HEAPU32=D=new Uint32Array(t),i.HEAPF32=C=new Float32Array(t),i.HEAPF64=U=new Float64Array(t)}var F=[],N=[],B=[],L=[],z=0;function xa(){var t=i.preRun.shift();F.unshift(t)}var V,H,j,$=0,W=null,Q=null;function u(t){throw i.onAbort&&i.onAbort(t),y(t="Aborted("+t+")"),O=!0,E=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),r(t),t}function Aa(t){return t.startsWith("data:application/octet-stream;base64,")}if(i.locateFile){if(!Aa(V="wa-sqlite-async.wasm")){var X=V;V=i.locateFile?i.locateFile(X,w):w+X}}else V=new URL(__webpack_require__(77),__webpack_require__.b).href;function Da(t){if(t==V&&m)return new Uint8Array(m);if(o)return o(t);throw"both async and sync fetching of the wasm failed"}function Fa(t,e,n){return function Ea(t){return m||!f&&!_||"function"!=typeof fetch?Promise.resolve().then((()=>Da(t))):fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>Da(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{y(`failed to asynchronously prepare wasm: ${t}`),u(t)}))}function Ha(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}var Ia=t=>{for(;0<t.length;)t.shift()(i)};function I(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return x[0|t];case"i16":return k[t>>1];case"i32":return A[t>>2];case"i64":u("to do getValue(i64) use WASM_BIGINT");case"float":return C[t>>2];case"double":return U[t>>3];case"*":return D[t>>2];default:u(`invalid type for getValue: ${e}`)}}function J(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":x[0|t]=e;break;case"i16":k[t>>1]=e;break;case"i32":A[t>>2]=e;break;case"i64":u("to do setValue(i64) use WASM_BIGINT");case"float":C[t>>2]=e;break;case"double":U[t>>3]=e;break;case"*":D[t>>2]=e;break;default:u(`invalid type for setValue: ${n}`)}}var Y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,K=(t,e,n)=>{var r=e+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&Y)return Y.decode(t.subarray(e,n));for(r="";e<n;){var i=t[e++];if(128&i){var o=63&t[e++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|o);else{var s=63&t[e++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|s:(7&i)<<18|o<<12|s<<6|63&t[e++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r},Ka=(t,e)=>{for(var n=0,r=t.length-1;0<=r;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n;n--)t.unshift("..");return t},M=t=>{var e="/"===t.charAt(0),n="/"===t.substr(-1);return(t=Ka(t.split("/").filter((t=>!!t)),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},La=t=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],t||e?(e&&(e=e.substr(0,e.length-1)),t+e):"."},Ma=t=>{if("/"===t)return"/";var e=(t=(t=M(t)).replace(/\/$/,"")).lastIndexOf("/");return-1===e?t:t.substr(e+1)},Oa=t=>(Oa=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return t=>crypto.getRandomValues(t);u("initRandomDevice")})())(t);function Pa(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){if("string"!=typeof(e=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e="/"===e.charAt(0)}return(e?"/":"")+(t=Ka(t.split("/").filter((t=>!!t)),!e).join("/"))||"."}var G=[],Ra=t=>{for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e},Sa=(t,e,n,r)=>{if(!(0<r))return 0;var i=n;r=n+r-1;for(var o=0;o<t.length;++o){var s=t.charCodeAt(o);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++o)),127>=s){if(n>=r)break;e[n++]=s}else{if(2047>=s){if(n+1>=r)break;e[n++]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;e[n++]=224|s>>12}else{if(n+3>=r)break;e[n++]=240|s>>18,e[n++]=128|s>>12&63}e[n++]=128|s>>6&63}e[n++]=128|63&s}}return e[n]=0,n-i},tt=[];function Ua(t,e){tt[t]={input:[],Tb:[],dc:e},Va(t,et)}var et={open(t){var e=tt[t.node.hc];if(!e)throw new ft(43);t.Ub=e,t.seekable=!1},close(t){t.Ub.dc.kc(t.Ub)},kc(t){t.Ub.dc.kc(t.Ub)},read(t,e,n,r){if(!t.Ub||!t.Ub.dc.zc)throw new ft(60);for(var i=0,o=0;o<r;o++){try{var s=t.Ub.dc.zc(t.Ub)}catch(t){throw new ft(29)}if(void 0===s&&0===i)throw new ft(6);if(null==s)break;i++,e[n+o]=s}return i&&(t.node.timestamp=Date.now()),i},write(t,e,n,r){if(!t.Ub||!t.Ub.dc.tc)throw new ft(60);try{for(var i=0;i<r;i++)t.Ub.dc.tc(t.Ub,e[n+i])}catch(t){throw new ft(29)}return r&&(t.node.timestamp=Date.now()),i}},nt={zc(){t:{if(!G.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t){var e=null;break t}e=Array(Ra(t)+1),t=Sa(t,e,0,e.length),e.length=t,G=e}e=G.shift()}return e},tc(t,e){null===e||10===e?(p(K(t.Tb,0)),t.Tb=[]):0!=e&&t.Tb.push(e)},kc(t){t.Tb&&0<t.Tb.length&&(p(K(t.Tb,0)),t.Tb=[])},$c:()=>({Wc:25856,Yc:5,Vc:191,Xc:35387,Uc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ad:()=>0,bd:()=>[24,80]},rt={tc(t,e){null===e||10===e?(y(K(t.Tb,0)),t.Tb=[]):0!=e&&t.Tb.push(e)},kc(t){t.Tb&&0<t.Tb.length&&(y(K(t.Tb,0)),t.Tb=[])}};function Za(t,e){var n=t.Pb?t.Pb.length:0;n>=e||(e=Math.max(e,n*(1048576>n?2:1.125)>>>0),0!=n&&(e=Math.max(e,256)),n=t.Pb,t.Pb=new Uint8Array(e),0<t.Rb&&t.Pb.set(n.subarray(0,t.Rb),0))}var it={Xb:null,Wb:()=>it.createNode(null,"/",16895,0),createNode(t,e,n,r){if(24576==(61440&n)||4096==(61440&n))throw new ft(63);return it.Xb||(it.Xb={dir:{node:{Vb:it.Eb.Vb,Sb:it.Eb.Sb,ec:it.Eb.ec,lc:it.Eb.lc,Dc:it.Eb.Dc,qc:it.Eb.qc,oc:it.Eb.oc,Cc:it.Eb.Cc,pc:it.Eb.pc},stream:{ac:it.Ob.ac}},file:{node:{Vb:it.Eb.Vb,Sb:it.Eb.Sb},stream:{ac:it.Ob.ac,read:it.Ob.read,write:it.Ob.write,wc:it.Ob.wc,mc:it.Ob.mc,nc:it.Ob.nc}},link:{node:{Vb:it.Eb.Vb,Sb:it.Eb.Sb,ic:it.Eb.ic},stream:{}},xc:{node:{Vb:it.Eb.Vb,Sb:it.Eb.Sb},stream:ht}}),P((n=ab(t,e,n,r)).mode)?(n.Eb=it.Xb.dir.node,n.Ob=it.Xb.dir.stream,n.Pb={}):32768==(61440&n.mode)?(n.Eb=it.Xb.file.node,n.Ob=it.Xb.file.stream,n.Rb=0,n.Pb=null):40960==(61440&n.mode)?(n.Eb=it.Xb.link.node,n.Ob=it.Xb.link.stream):8192==(61440&n.mode)&&(n.Eb=it.Xb.xc.node,n.Ob=it.Xb.xc.stream),n.timestamp=Date.now(),t&&(t.Pb[e]=n,t.timestamp=n.timestamp),n},Zc:t=>t.Pb?t.Pb.subarray?t.Pb.subarray(0,t.Rb):new Uint8Array(t.Pb):new Uint8Array(0),Eb:{Vb(t){var e={};return e.Jc=8192==(61440&t.mode)?t.id:1,e.Ac=t.id,e.mode=t.mode,e.Pc=1,e.uid=0,e.Mc=0,e.hc=t.hc,P(t.mode)?e.size=4096:32768==(61440&t.mode)?e.size=t.Rb:40960==(61440&t.mode)?e.size=t.link.length:e.size=0,e.Fc=new Date(t.timestamp),e.Oc=new Date(t.timestamp),e.Ic=new Date(t.timestamp),e.Gc=4096,e.Hc=Math.ceil(e.size/e.Gc),e},Sb(t,e){if(void 0!==e.mode&&(t.mode=e.mode),void 0!==e.timestamp&&(t.timestamp=e.timestamp),void 0!==e.size&&(e=e.size,t.Rb!=e))if(0==e)t.Pb=null,t.Rb=0;else{var n=t.Pb;t.Pb=new Uint8Array(e),n&&t.Pb.set(n.subarray(0,Math.min(e,t.Rb))),t.Rb=e}},ec(){throw bt[44]},lc:(t,e,n,r)=>it.createNode(t,e,n,r),Dc(t,e,n){if(P(t.mode)){try{var r=cb(e,n)}catch(t){}if(r)for(var i in r.Pb)throw new ft(55)}delete t.parent.Pb[t.name],t.parent.timestamp=Date.now(),t.name=n,e.Pb[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},qc(t,e){delete t.Pb[e],t.timestamp=Date.now()},oc(t,e){var n,r=cb(t,e);for(n in r.Pb)throw new ft(55);delete t.Pb[e],t.timestamp=Date.now()},Cc(t){var e,n=[".",".."];for(e in t.Pb)t.Pb.hasOwnProperty(e)&&n.push(e);return n},pc:(t,e,n)=>((t=it.createNode(t,e,41471,0)).link=n,t),ic(t){if(40960!=(61440&t.mode))throw new ft(28);return t.link}},Ob:{read(t,e,n,r,i){var o=t.node.Pb;if(i>=t.node.Rb)return 0;if(8<(t=Math.min(t.node.Rb-i,r))&&o.subarray)e.set(o.subarray(i,i+t),n);else for(r=0;r<t;r++)e[n+r]=o[i+r];return t},write(t,e,n,r,i,o){if(e.buffer===x.buffer&&(o=!1),!r)return 0;if((t=t.node).timestamp=Date.now(),e.subarray&&(!t.Pb||t.Pb.subarray)){if(o)return t.Pb=e.subarray(n,n+r),t.Rb=r;if(0===t.Rb&&0===i)return t.Pb=e.slice(n,n+r),t.Rb=r;if(i+r<=t.Rb)return t.Pb.set(e.subarray(n,n+r),i),r}if(Za(t,i+r),t.Pb.subarray&&e.subarray)t.Pb.set(e.subarray(n,n+r),i);else for(o=0;o<r;o++)t.Pb[i+o]=e[n+o];return t.Rb=Math.max(t.Rb,i+r),r},ac(t,e,n){if(1===n?e+=t.position:2===n&&32768==(61440&t.node.mode)&&(e+=t.node.Rb),0>e)throw new ft(28);return e},wc(t,e,n){Za(t.node,e+n),t.node.Rb=Math.max(t.node.Rb,e+n)},mc(t,e,n,r,i){if(32768!=(61440&t.node.mode))throw new ft(43);if(t=t.node.Pb,2&i||t.buffer!==x.buffer){if((0<n||n+e<t.length)&&(t=t.subarray?t.subarray(n,n+e):Array.prototype.slice.call(t,n,n+e)),n=!0,e=65536*Math.ceil(e/65536),(i=db(65536,e))?(q.fill(0,i,i+e),e=i):e=0,!e)throw new ft(48);x.set(t,e)}else n=!1,e=t.byteOffset;return{Qc:e,Ec:n}},nc:(t,e,n,r)=>(it.Ob.write(t,e,0,r,n,!1),0)}},eb=(t,e)=>{var n=0;return t&&(n|=365),e&&(n|=146),n},ot=null,at={},st=[],ct=1,ut=null,lt=!0,ft=null,bt={};function R(t,e={}){if(!(t=Pa(t)))return{path:"",node:null};if(8<(e=Object.assign({yc:!0,uc:0},e)).uc)throw new ft(32);t=t.split("/").filter((t=>!!t));for(var n=ot,r="/",i=0;i<t.length;i++){var o=i===t.length-1;if(o&&e.parent)break;if(n=cb(n,t[i]),r=M(r+"/"+t[i]),n.bc&&(!o||o&&e.yc)&&(n=n.bc.root),!o||e.$b)for(o=0;40960==(61440&n.mode);)if(n=kb(r),n=R(r=Pa(La(r),n),{uc:e.uc+1}).node,40<o++)throw new ft(32)}return{path:r,node:n}}function lb(t){for(var e;;){if(t===t.parent)return t=t.Wb.Bc,e?"/"!==t[t.length-1]?`${t}/${e}`:t+e:t;e=e?`${t.name}/${e}`:t.name,t=t.parent}}function mb(t,e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r)|0;return(t+n>>>0)%ut.length}function nb(t){var e=mb(t.parent.id,t.name);if(ut[e]===t)ut[e]=t.cc;else for(e=ut[e];e;){if(e.cc===t){e.cc=t.cc;break}e=e.cc}}function cb(t,e){var n;if(n=(n=ob(t,"x"))?n:t.Eb.ec?0:2)throw new ft(n,t);for(n=ut[mb(t.id,e)];n;n=n.cc){var r=n.name;if(n.parent.id===t.id&&r===e)return n}return t.Eb.ec(t,e)}function ab(t,e,n,r){return e=mb((t=new pb(t,e,n,r)).parent.id,t.name),t.cc=ut[e],ut[e]=t}function P(t){return 16384==(61440&t)}function qb(t){var e=["r","w","rw"][3&t];return 512&t&&(e+="w"),e}function ob(t,e){return lt?0:!e.includes("r")||292&t.mode?e.includes("w")&&!(146&t.mode)||e.includes("x")&&!(73&t.mode)?2:0:2}function rb(t,e){try{return cb(t,e),20}catch(t){}return ob(t,"wx")}function sb(t,e,n){try{var r=cb(t,e)}catch(t){return t.Qb}if(t=ob(t,"wx"))return t;if(n){if(!P(r.mode))return 54;if(r===r.parent||"/"===lb(r))return 10}else if(P(r.mode))return 31;return 0}function S(t){if(!(t=st[t]))throw new ft(8);return t}function ub(t,e=-1){return wt||((wt=function(){this.jc={}}).prototype={},Object.defineProperties(wt.prototype,{object:{get(){return this.node},set(t){this.node=t}},flags:{get(){return this.jc.flags},set(t){this.jc.flags=t}},position:{get(){return this.jc.position},set(t){this.jc.position=t}}})),t=Object.assign(new wt,t),-1==e&&(e=function tb(){for(var t=0;4096>=t;t++)if(!st[t])return t;throw new ft(33)}()),t.Yb=e,st[e]=t}var dt,ht={open(t){t.Ob=at[t.node.hc].Ob,t.Ob.open&&t.Ob.open(t)},ac(){throw new ft(70)}};function Va(t,e){at[t]={Ob:e}}function wb(t,e){var n="/"===e,r=!e;if(n&&ot)throw new ft(10);if(!n&&!r){var i=R(e,{yc:!1});if(e=i.path,(i=i.node).bc)throw new ft(10);if(!P(i.mode))throw new ft(54)}e={type:t,dd:{},Bc:e,Nc:[]},(t=t.Wb(e)).Wb=e,e.root=t,n?ot=t:i&&(i.bc=e,i.Wb&&i.Wb.Nc.push(e))}function xb(t,e,n){var r=R(t,{parent:!0}).node;if(!(t=Ma(t))||"."===t||".."===t)throw new ft(28);var i=rb(r,t);if(i)throw new ft(i);if(!r.Eb.lc)throw new ft(63);return r.Eb.lc(r,t,e,n)}function T(t,e){return xb(t,1023&(void 0!==e?e:511)|16384,0)}function yb(t,e,n){void 0===n&&(n=e,e=438),xb(t,8192|e,n)}function zb(t,e){if(!Pa(t))throw new ft(44);var n=R(e,{parent:!0}).node;if(!n)throw new ft(44);var r=rb(n,e=Ma(e));if(r)throw new ft(r);if(!n.Eb.pc)throw new ft(63);n.Eb.pc(n,e,t)}function Ab(t){var e=R(t,{parent:!0}).node,n=cb(e,t=Ma(t)),r=sb(e,t,!0);if(r)throw new ft(r);if(!e.Eb.oc)throw new ft(63);if(n.bc)throw new ft(10);e.Eb.oc(e,t),nb(n)}function kb(t){if(!(t=R(t).node))throw new ft(44);if(!t.Eb.ic)throw new ft(28);return Pa(lb(t.parent),t.Eb.ic(t))}function Bb(t,e){if(!(t=R(t,{$b:!e}).node))throw new ft(44);if(!t.Eb.Vb)throw new ft(63);return t.Eb.Vb(t)}function Cb(t){return Bb(t,!0)}function Db(t,e){if(!(t="string"==typeof t?R(t,{$b:!0}).node:t).Eb.Sb)throw new ft(63);t.Eb.Sb(t,{mode:4095&e|-4096&t.mode,timestamp:Date.now()})}function Eb(t,e){if(0>e)throw new ft(28);if(!(t="string"==typeof t?R(t,{$b:!0}).node:t).Eb.Sb)throw new ft(63);if(P(t.mode))throw new ft(31);if(32768!=(61440&t.mode))throw new ft(28);var n=ob(t,"w");if(n)throw new ft(n);t.Eb.Sb(t,{size:e,timestamp:Date.now()})}function Fb(t,e,n){if(""===t)throw new ft(44);if("string"==typeof e){var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===r)throw Error(`Unknown file open mode: ${e}`);e=r}if(n=64&e?4095&(void 0===n?438:n)|32768:0,"object"==typeof t)var o=t;else{t=M(t);try{o=R(t,{$b:!(131072&e)}).node}catch(t){}}if(r=!1,64&e)if(o){if(128&e)throw new ft(20)}else o=xb(t,n,0),r=!0;if(!o)throw new ft(44);if(8192==(61440&o.mode)&&(e&=-513),65536&e&&!P(o.mode))throw new ft(54);if(!r&&(n=o?40960==(61440&o.mode)?32:P(o.mode)&&("r"!==qb(e)||512&e)?31:ob(o,qb(e)):44))throw new ft(n);return 512&e&&!r&&Eb(o,0),e&=-131713,(o=ub({node:o,path:lb(o),flags:e,seekable:!0,position:0,Ob:o.Ob,Tc:[],error:!1})).Ob.open&&o.Ob.open(o),!i.logReadFiles||1&e||(mt||(mt={}),t in mt||(mt[t]=1)),o}function Hb(t,e,n){if(null===t.Yb)throw new ft(8);if(!t.seekable||!t.Ob.ac)throw new ft(70);if(0!=n&&1!=n&&2!=n)throw new ft(28);t.position=t.Ob.ac(t,e,n),t.Tc=[]}function Ib(){ft||((ft=function(t,e){this.name="ErrnoError",this.node=e,this.Rc=function(t){this.Qb=t},this.Rc(t),this.message="FS error"}).prototype=Error(),ft.prototype.constructor=ft,[44].forEach((t=>{bt[t]=new ft(t),bt[t].stack="<generic error, no stack>"})))}function Kb(t,e,n){t=M("/dev/"+t);var r=eb(!!e,!!n);_t||(_t=64);var i=_t++<<8;Va(i,{open(t){t.seekable=!1},close(){n&&n.buffer&&n.buffer.length&&n(10)},read(t,n,r,i){for(var o=0,s=0;s<i;s++){try{var l=e()}catch(t){throw new ft(29)}if(void 0===l&&0===o)throw new ft(6);if(null==l)break;o++,n[r+s]=l}return o&&(t.node.timestamp=Date.now()),o},write(t,e,r,i){for(var o=0;o<i;o++)try{n(e[r+o])}catch(t){throw new ft(29)}return i&&(t.node.timestamp=Date.now()),o}}),yb(t,r,i)}var _t,wt,mt,pt={};function Mb(t,e,n){if("/"===e.charAt(0))return e;if(t=-100===t?"/":S(t).path,0==e.length){if(!n)throw new ft(44);return t}return M(t+"/"+e)}function Nb(t,e,n){try{var r=t(e)}catch(t){if(t&&t.node&&M(e)!==M(lb(t.node)))return-54;throw t}A[n>>2]=r.Jc,A[n+4>>2]=r.mode,D[n+8>>2]=r.Pc,A[n+12>>2]=r.uid,A[n+16>>2]=r.Mc,A[n+20>>2]=r.hc,j=[r.size>>>0,(H=r.size,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+24>>2]=j[0],A[n+28>>2]=j[1],A[n+32>>2]=4096,A[n+36>>2]=r.Hc,t=r.Fc.getTime(),e=r.Oc.getTime();var i=r.Ic.getTime();return j=[Math.floor(t/1e3)>>>0,(H=Math.floor(t/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+40>>2]=j[0],A[n+44>>2]=j[1],D[n+48>>2]=t%1e3*1e3,j=[Math.floor(e/1e3)>>>0,(H=Math.floor(e/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+56>>2]=j[0],A[n+60>>2]=j[1],D[n+64>>2]=e%1e3*1e3,j=[Math.floor(i/1e3)>>>0,(H=Math.floor(i/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+72>>2]=j[0],A[n+76>>2]=j[1],D[n+80>>2]=i%1e3*1e3,j=[r.Ac>>>0,(H=r.Ac,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+88>>2]=j[0],A[n+92>>2]=j[1],0}var yt=void 0;function Pb(){var t=A[yt>>2];return yt+=4,t}var gt,Qb=(t,e)=>e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN,vt=[0,31,60,91,121,152,182,213,244,274,305,335],Et=[0,31,59,90,120,151,181,212,243,273,304,334],Ub=t=>{var e=Ra(t)+1,n=Ot(e);return n&&Sa(t,q,n,e),n},xt={},Xb=()=>{if(!gt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(t in xt)void 0===xt[t]?delete e[t]:e[t]=xt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);gt=n}return gt};function Yb(){}function Zb(){}function $b(){}function ac(){}function bc(){}function cc(){}function dc(){}function ec(){}function fc(){}function gc(){}function hc(){}function ic(){}function jc(){}function kc(){}function lc(){}function mc(){}function nc(){}function oc(){}function pc(){}function qc(){}function rc(){}function sc(){}function tc(){}function uc(){}function vc(){}function wc(){}function xc(){}function yc(){}function zc(){}function Ac(){}function Bc(){}function Cc(){}function Dc(){}function Ec(){}function Fc(){}function Gc(){}function Hc(){}function Ic(){}function Jc(){}function Kc(){}var Lc=t=>{E=t,g||0<z||(i.onExit&&i.onExit(t),O=!0),ea(t,new Ha(t))},Mc=t=>{t instanceof Ha||"unwind"==t||ea(1,t)},Nc=t=>{try{t()}catch(t){u(t)}},qt=0,St=null,kt=0,Rt=[],At={},It={},Dt=0,Tt=null,Pt=[];function Zc(t){if(!O){if(0===qt){var e=!1,n=!1;t(((t=0)=>{if(!O&&(kt=t,e=!0,n)){qt=2,Nc((()=>$c(St))),"undefined"!=typeof Browser&&Browser.sc.Lc&&Browser.sc.resume(),t=!1;try{var r=(0,Ut[It[A[St+8>>2]]])()}catch(e){r=e,t=!0}var i=!1;if(!St){var o=Tt;o&&(Tt=null,(t?o.reject:o.resolve)(r),i=!0)}if(t&&!i)throw r}})),n=!0,e||(qt=1,St=function Yc(){var t=Ot(16396),e=t+12;D[t>>2]=e,D[t+4>>2]=e+16384,e=Rt[0];var n=At[e];return void 0===n&&(n=Dt++,At[e]=n,It[n]=e),A[t+8>>2]=n,t}(),"undefined"!=typeof Browser&&Browser.sc.Lc&&Browser.sc.pause(),Nc((()=>ad(St))))}else 2===qt?(qt=0,Nc(bd),Ft(St),St=null,Pt.forEach((t=>{if(!O)try{if(t(),!(g||0<z))try{E=t=E,Lc(t)}catch(t){Mc(t)}}catch(t){Mc(t)}}))):u(`invalid state: ${qt}`);return kt}}function dd(t){return Zc((e=>{t().then(e)}))}var Ct={},Z=(t,e,n,r,o)=>{function h(t){return--z,0!==f&&fd(f),"string"===e?t?K(q,t):"":"boolean"===e?!!t:t}var s={string:t=>{var e=0;if(null!=t&&0!==t){e=Ra(t)+1;var n=gd(e);Sa(t,q,n,e),e=n}return e},array:t=>{var e=gd(t.length);return x.set(t,e),e}};t=i["_"+t];var l=[],f=0;if(r)for(var _=0;_<r.length;_++){var w=s[n[_]];w?(0===f&&(f=hd()),l[_]=w(r[_])):l[_]=r[_]}return n=St,r=t.apply(null,l),o=o&&o.async,z+=1,St!=n?function Xc(){return new Promise(((t,e)=>{Tt={resolve:t,reject:e}}))}().then(h):(r=h(r),o?Promise.resolve(r):r)};function pb(t,e,n,r){t||(t=this),this.parent=t,this.Wb=t.Wb,this.bc=null,this.id=ct++,this.name=e,this.mode=n,this.Eb={},this.Ob={},this.hc=r}Object.defineProperties(pb.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(t){t?this.mode|=146:this.mode&=-147}}}),Ib(),ut=Array(4096),wb(it,"/"),T("/tmp"),T("/home"),T("/home/web_user"),function(){T("/dev"),Va(259,{read:()=>0,write:(t,e,n,r)=>r}),yb("/dev/null",259),Ua(1280,nt),Ua(1536,rt),yb("/dev/tty",1280),yb("/dev/tty1",1536);var t=new Uint8Array(1024),e=0,c=()=>(0===e&&(e=Oa(t).byteLength),t[--e]);Kb("random",c),Kb("urandom",c),T("/dev/shm"),T("/dev/shm/tmp")}(),function(){T("/proc");var t=T("/proc/self");T("/proc/self/fd"),wb({Wb(){var e=ab(t,"fd",16895,73);return e.Eb={ec(t,e){var n=S(+e);return(t={parent:null,Wb:{Bc:"fake"},Eb:{ic:()=>n.path}}).parent=t}},e}},"/proc/self/fd")}(),function(){const t=new Map;i.setAuthorizer=function(e,n,r){return n?t.set(e,{f:n,vc:r}):t.delete(e),Z("set_authorizer","number",["number"],[e])},Yb=function(e,n,r,i,o,s){if(t.has(e)){const{f:l,vc:f}=t.get(e);return l(f,n,r?r?K(q,r):"":null,i?i?K(q,i):"":null,o?o?K(q,o):"":null,s?s?K(q,s):"":null)}return 0}}(),function(){function a(t,e){const n=[];for(let r=0;0!=t[e+r];++r){if(1e3<r)throw Error("C-string never terminated after 1k characters");n.push(t[e+r])}return String.fromCharCode(...n)}const t=new Map,e=new Map;i.createFunction=function(e,n,r,i,o,s){const l=t.size;return t.set(l,{f:s,Zb:o}),Z("create_function","number","number string number number number number".split(" "),[e,n,r,i,l,0])},i.createAggregate=function(e,n,r,i,o,s,l){const f=t.size;return t.set(f,{step:s,Kc:l,Zb:o}),Z("create_function","number","number string number number number number".split(" "),[e,n,r,i,f,1])},i.getFunctionUserData=function(t){return e.get(t)},i.updateHook=function(e,n){const r=t.size;return t.set(r,n),Z("update_hook","void",["number","number"],[e,r])},$b=function(n,r,i,o){n=t.get(n),e.set(r,n.Zb),n.f(r,new Uint32Array(q.buffer,o,i)),e.delete(r)},bc=function(n,r,i,o){n=t.get(n),e.set(r,n.Zb),n.step(r,new Uint32Array(q.buffer,o,i)),e.delete(r)},Zb=function(n,r){n=t.get(n),e.set(r,n.Zb),n.Kc(r),e.delete(r)},cc=function(e,n,r,i,o,s){e=t.get(e);const l=q;o=BigInt(s)<<32n|4294967295n&BigInt(o),e(n,a(l,r),a(l,i),o)}}(),function(){const t=new Map;i.progressHandler=function(e,n,r,i){return r?t.set(e,{f:r,vc:i}):t.delete(e),Z("progress_handler",null,["number","number"],[e,n])},ac=function(e){if(t.has(e)){const{f:n,vc:r}=t.get(e);return n(r)}return 0}}(),function(){function a(t,e){const n=`get${t}`,r=`set${t}`;return new Proxy(new DataView(q.buffer,e,"Int32"===t?4:8),{get(t,e){if(e===n)return function(n,r){if(!r)throw Error("must be little endian");return t[e](n,r)};if(e===r)return function(n,r,i){if(!i)throw Error("must be little endian");return t[e](n,r,i)};if("string"==typeof e&&e.match(/^(get)|(set)/))throw Error("invalid type");return t[e]}})}const t="object"==typeof Ct,e=new Map,n=new Map,r=new Map,o=t?new Set:null,s=t?new Set:null,l=new Map;tc=function(t,e,n,r){l.set(t?K(q,t):"",{size:e,fc:Array.from(new Uint32Array(q.buffer,r,n))})},i.createModule=function(n,r,i,o){t&&(i.handleAsync=dd);const s=e.size;return e.set(s,{module:i,Zb:o}),o=0,i.xCreate&&(o|=1),i.xConnect&&(o|=2),i.xBestIndex&&(o|=4),i.xDisconnect&&(o|=8),i.xDestroy&&(o|=16),i.xOpen&&(o|=32),i.xClose&&(o|=64),i.xFilter&&(o|=128),i.xNext&&(o|=256),i.xEof&&(o|=512),i.xColumn&&(o|=1024),i.xRowid&&(o|=2048),i.xUpdate&&(o|=4096),i.xBegin&&(o|=8192),i.xSync&&(o|=16384),i.xCommit&&(o|=32768),i.xRollback&&(o|=65536),i.xFindFunction&&(o|=131072),i.xRename&&(o|=262144),Z("create_module","number",["number","string","number","number"],[n,r,s,o])},jc=function(r,i,s,l,f,_){if(i=e.get(i),n.set(f,i),t){o.delete(f);for(const t of o)n.delete(t)}return l=Array.from(new Uint32Array(q.buffer,l,s)).map((t=>t?K(q,t):"")),i.module.xCreate(r,i.Zb,l,f,a("Int32",_))},ic=function(r,i,s,l,f,_){if(i=e.get(i),n.set(f,i),t){o.delete(f);for(const t of o)n.delete(t)}return l=Array.from(new Uint32Array(q.buffer,l,s)).map((t=>t?K(q,t):"")),i.module.xConnect(r,i.Zb,l,f,a("Int32",_))},ec=function(t,e){var r=n.get(t),i=l.get("sqlite3_index_info").fc;const o={};o.nConstraint=I(e+i[0],"i32"),o.aConstraint=[];for(var s=I(e+i[1],"*"),f=l.get("sqlite3_index_constraint").size,_=0;_<o.nConstraint;++_){var w=o.aConstraint,m=w.push,p=s+_*f,y=l.get("sqlite3_index_constraint").fc,g={};g.iColumn=I(p+y[0],"i32"),g.op=I(p+y[1],"i8"),g.usable=!!I(p+y[2],"i8"),m.call(w,g)}for(o.nOrderBy=I(e+i[2],"i32"),o.aOrderBy=[],s=I(e+i[3],"*"),f=l.get("sqlite3_index_orderby").size,_=0;_<o.nOrderBy;++_)m=(w=o.aOrderBy).push,p=s+_*f,y=l.get("sqlite3_index_orderby").fc,(g={}).iColumn=I(p+y[0],"i32"),g.desc=!!I(p+y[1],"i8"),m.call(w,g);for(o.aConstraintUsage=[],s=0;s<o.nConstraint;++s)o.aConstraintUsage.push({argvIndex:0,omit:!1});for(o.idxNum=I(e+i[5],"i32"),o.idxStr=null,o.orderByConsumed=!!I(e+i[8],"i8"),o.estimatedCost=I(e+i[9],"double"),o.estimatedRows=I(e+i[10],"i32"),o.idxFlags=I(e+i[11],"i32"),o.colUsed=I(e+i[12],"i32"),t=r.module.xBestIndex(t,o),i=I(e+(r=l.get("sqlite3_index_info").fc)[4],"*"),s=l.get("sqlite3_index_constraint_usage").size,m=0;m<o.nConstraint;++m)f=i+m*s,w=o.aConstraintUsage[m],J(f+(p=l.get("sqlite3_index_constraint_usage").fc)[0],w.argvIndex,"i32"),J(f+p[1],w.omit?1:0,"i8");return J(e+r[5],o.idxNum,"i32"),"string"==typeof o.idxStr&&(i=Ra(o.idxStr),s=Z("sqlite3_malloc","number",["number"],[i+1]),Sa(o.idxStr,q,s,i+1),J(e+r[6],s,"*"),J(e+r[7],1,"i32")),J(e+r[8],o.orderByConsumed,"i32"),J(e+r[9],o.estimatedCost,"double"),J(e+r[10],o.estimatedRows,"i32"),J(e+r[11],o.idxFlags,"i32"),t},lc=function(e){const r=n.get(e);return t?o.add(e):n.delete(e),r.module.xDisconnect(e)},kc=function(e){const r=n.get(e);return t?o.add(e):n.delete(e),r.module.xDestroy(e)},pc=function(e,i){const o=n.get(e);if(r.set(i,o),t){s.delete(i);for(const t of s)r.delete(t)}return o.module.xOpen(e,i)},fc=function(e){const n=r.get(e);return t?s.add(e):r.delete(e),n.module.xClose(e)},mc=function(t){return r.get(t).module.xEof(t)?1:0},nc=function(t,e,n,i,o){const s=r.get(t);return n=n?n?K(q,n):"":null,o=new Uint32Array(q.buffer,o,i),s.module.xFilter(t,e,n,o)},oc=function(t){return r.get(t).module.xNext(t)},gc=function(t,e,n){return r.get(t).module.xColumn(t,e,n)},sc=function(t,e){return r.get(t).module.xRowid(t,a("BigInt64",e))},vc=function(t,e,r,i){const o=n.get(t);return r=new Uint32Array(q.buffer,r,e),o.module.xUpdate(t,r,a("BigInt64",i))},dc=function(t){return n.get(t).module.xBegin(t)},uc=function(t){return n.get(t).module.xSync(t)},hc=function(t){return n.get(t).module.xCommit(t)},rc=function(t){return n.get(t).module.xRollback(t)},qc=function(t,e){const r=n.get(t);return e=e?K(q,e):"",r.module.xRename(t,e)}}(),function(){function a(t,e){const n=`get${t}`,r=`set${t}`;return new Proxy(new DataView(q.buffer,e,"Int32"===t?4:8),{get(t,e){if(e===n)return function(n,r){if(!r)throw Error("must be little endian");return t[e](n,r)};if(e===r)return function(n,r,i){if(!i)throw Error("must be little endian");return t[e](n,r,i)};if("string"==typeof e&&e.match(/^(get)|(set)/))throw Error("invalid type");return t[e]}})}function b(t){return D[t>>=2]+D[t+1]*2**32}const t="object"==typeof Ct,e=new Map,n=new Map;i.registerVFS=function(n,r){if(Z("sqlite3_vfs_find","number",["string"],[n.name]))throw Error(`VFS '${n.name}' already registered`);t&&(n.handleAsync=dd);var o=n.cd??64;const s=i._malloc(4);return(r=Z("register_vfs","number",["string","number","number","number"],[n.name,o,r?1:0,s]))||(o=I(s,"*"),e.set(o,n)),i._free(s),r};const r=t?new Set:null;yc=function(e){const i=n.get(e);return t?r.add(e):n.delete(e),i.xClose(e)},Fc=function(t,e,r,i){return n.get(t).xRead(t,q.subarray(e,e+r),b(i))},Kc=function(t,e,r,i){return n.get(t).xWrite(t,q.subarray(e,e+r),b(i))},Ic=function(t,e){return n.get(t).xTruncate(t,b(e))},Hc=function(t,e){return n.get(t).xSync(t,e)},Cc=function(t,e){const r=n.get(t);return e=a("BigInt64",e),r.xFileSize(t,e)},Dc=function(t,e){return n.get(t).xLock(t,e)},Jc=function(t,e){return n.get(t).xUnlock(t,e)},xc=function(t,e){const r=n.get(t);return e=a("Int32",e),r.xCheckReservedLock(t,e)},Bc=function(t,e,r){const i=n.get(t);return r=new DataView(q.buffer,r),i.xFileControl(t,e,r)},Gc=function(t){return n.get(t).xSectorSize(t)},Ac=function(t){return n.get(t).xDeviceCharacteristics(t)},Ec=function(i,o,s,l,f){if(i=e.get(i),n.set(s,i),t)for(var _ of(r.delete(s),r))n.delete(_);if(_=null,64&l){_=1;const t=[];for(;_;){const e=q[o++];if(e)t.push(e);else switch(q[o]||(_=null),_){case 1:t.push(63),_=2;break;case 2:t.push(61),_=3;break;case 3:t.push(38),_=2}}_=(new TextDecoder).decode(new Uint8Array(t))}else o&&(_=o?K(q,o):"");return f=a("Int32",f),i.xOpen(_,s,l,f)},zc=function(t,n,r){return e.get(t).xDelete(n?K(q,n):"",r)},wc=function(t,n,r,i){return t=e.get(t),i=a("Int32",i),t.xAccess(n?K(q,n):"",r,i)}}();var Mt={a:(t,e,n,r)=>{u(`Assertion failed: ${t?K(q,t):""}, at: `+[e?e?K(q,e):"":"unknown filename",n,r?r?K(q,r):"":"unknown function"])},K:function(t,e){try{return Db(t=t?K(q,t):"",e),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},M:function(t,e,n){try{if(e=Mb(t,e=e?K(q,e):""),-8&n)return-28;var r=R(e,{$b:!0}).node;return r?(t="",4&n&&(t+="r"),2&n&&(t+="w"),1&n&&(t+="x"),t&&ob(r,t)?-2:0):-44}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},L:function(t,e){try{return Db(S(t).node,e),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},J:function(t){try{var e=S(t).node,n="string"==typeof e?R(e,{$b:!0}).node:e;if(!n.Eb.Sb)throw new ft(63);return n.Eb.Sb(n,{timestamp:Date.now()}),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},b:function(t,e,n){yt=n;try{var r=S(t);switch(e){case 0:var i=Pb();if(0>i)return-28;for(;st[i];)i++;return ub(r,i).Yb;case 1:case 2:case 6:case 7:return 0;case 3:return r.flags;case 4:return i=Pb(),r.flags|=i,0;case 5:return i=Pb(),k[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return A[jd()>>2]=28,-1}}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},I:function(t,e){try{return Nb(Bb,S(t).path,e)}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},n:function(t,e,n){e=Qb(e,n);try{if(isNaN(e))return 61;var r=S(t);if(!(2097155&r.flags))throw new ft(28);return Eb(r.node,e),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},C:function(t,e){try{if(0===e)return-28;var n=Ra("/")+1;return e<n?-68:(Sa("/",q,t,e),n)}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},F:function(t,e){try{return Nb(Cb,t=t?K(q,t):"",e)}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},z:function(t,e,n){try{return e=Mb(t,e=e?K(q,e):""),"/"===(e=M(e))[e.length-1]&&(e=e.substr(0,e.length-1)),T(e,n),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},E:function(t,e,n,r){try{return Nb(256&r?Cb:Bb,e=Mb(t,e=e?K(q,e):"",4096&r),n)}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},y:function(t,e,n,r){yt=r;try{return Fb(e=Mb(t,e=e?K(q,e):""),n,r?Pb():0).Yb}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},v:function(t,e,n,r){try{if(e=Mb(t,e=e?K(q,e):""),0>=r)return-28;var i=kb(e),o=Math.min(r,Ra(i)),s=x[n+o];return Sa(i,q,n,r+1),x[n+o]=s,o}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},u:function(t){try{return Ab(t=t?K(q,t):""),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},G:function(t,e){try{return Nb(Bb,t=t?K(q,t):"",e)}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},r:function(t,e,n){try{if(e=Mb(t,e=e?K(q,e):""),0===n){var r=R(t=e,{parent:!0}).node;if(!r)throw new ft(44);var i=Ma(t),o=cb(r,i),s=sb(r,i,!1);if(s)throw new ft(s);if(!r.Eb.qc)throw new ft(63);if(o.bc)throw new ft(10);r.Eb.qc(r,i),nb(o)}else 512===n?Ab(e):u("Invalid flags passed to unlinkat");return 0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},q:function(t,e,n){try{if(e=Mb(t,e=e?K(q,e):"",!0),n){var r=D[n>>2]+4294967296*A[n+4>>2],i=A[n+8>>2];o=1e3*r+i/1e6,s=1e3*(r=D[(n+=16)>>2]+4294967296*A[n+4>>2])+(i=A[n+8>>2])/1e6}else var o=Date.now(),s=o;t=o;var l=R(e,{$b:!0}).node;return l.Eb.Sb(l,{timestamp:Math.max(t,s)}),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},k:function(t,e,n){t=new Date(1e3*Qb(t,e)),A[n>>2]=t.getSeconds(),A[n+4>>2]=t.getMinutes(),A[n+8>>2]=t.getHours(),A[n+12>>2]=t.getDate(),A[n+16>>2]=t.getMonth(),A[n+20>>2]=t.getFullYear()-1900,A[n+24>>2]=t.getDay(),e=t.getFullYear(),A[n+28>>2]=(0!=e%4||0==e%100&&0!=e%400?Et:vt)[t.getMonth()]+t.getDate()-1|0,A[n+36>>2]=-60*t.getTimezoneOffset(),e=new Date(t.getFullYear(),6,1).getTimezoneOffset();var r=new Date(t.getFullYear(),0,1).getTimezoneOffset();A[n+32>>2]=0|(e!=r&&t.getTimezoneOffset()==Math.min(r,e))},i:function(t,e,n,r,i,o,s,l){i=Qb(i,o);try{if(isNaN(i))return 61;var f=S(r);if(2&e&&!(2&n)&&2!=(2097155&f.flags))throw new ft(2);if(1==(2097155&f.flags))throw new ft(2);if(!f.Ob.mc)throw new ft(43);var _=f.Ob.mc(f,t,i,e,n),w=_.Qc;return A[s>>2]=_.Ec,D[l>>2]=w,0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},j:function(t,e,n,r,i,o,s){o=Qb(o,s);try{if(isNaN(o))return 61;var l=S(i);if(2&n){if(32768!=(61440&l.node.mode))throw new ft(43);2&r||l.Ob.nc&&l.Ob.nc(l,q.slice(t,t+e),o,e,r)}}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return-t.Qb}},s:(t,e,n)=>{function d(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var r=(new Date).getFullYear(),i=new Date(r,0,1),o=new Date(r,6,1);r=i.getTimezoneOffset();var s=o.getTimezoneOffset();D[t>>2]=60*Math.max(r,s),A[e>>2]=Number(r!=s),t=d(i),e=d(o),t=Ub(t),e=Ub(e),s<r?(D[n>>2]=t,D[n+4>>2]=e):(D[n>>2]=e,D[n+4>>2]=t)},e:()=>Date.now(),d:()=>performance.now(),o:t=>{var e=q.length;if(2147483648<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var i=Math;r=Math.max(t,r);t:{i=(i.min.call(i,2147483648,r+(65536-r%65536)%65536)-v.buffer.byteLength+65535)/65536;try{v.grow(i),ra();var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},A:(t,e)=>{var n=0;return Xb().forEach(((r,i)=>{var o=e+n;for(i=D[t+4*i>>2]=o,o=0;o<r.length;++o)x[0|i++]=r.charCodeAt(o);x[0|i]=0,n+=r.length+1})),0},B:(t,e)=>{var n=Xb();D[t>>2]=n.length;var r=0;return n.forEach((t=>r+=t.length+1)),D[e>>2]=r,0},f:function(t){try{var e=S(t);if(null===e.Yb)throw new ft(8);e.rc&&(e.rc=null);try{e.Ob.close&&e.Ob.close(e)}catch(t){throw t}finally{st[e.Yb]=null}return e.Yb=null,0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return t.Qb}},p:function(t,e){try{var n=S(t);return x[0|e]=n.Ub?2:P(n.mode)?3:40960==(61440&n.mode)?7:4,k[e+2>>1]=0,j=[0,(H=0,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[e+8>>2]=j[0],A[e+12>>2]=j[1],j=[0,(H=0,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[e+16>>2]=j[0],A[e+20>>2]=j[1],0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return t.Qb}},x:function(t,e,n,r){try{t:{var i=S(t);t=e;for(var o,s=e=0;s<n;s++){var l=D[t>>2],f=D[t+4>>2];t+=8;var _=i,w=l,m=f,p=o,y=x;if(0>m||0>p)throw new ft(28);if(null===_.Yb)throw new ft(8);if(1==(2097155&_.flags))throw new ft(8);if(P(_.node.mode))throw new ft(31);if(!_.Ob.read)throw new ft(28);var g=void 0!==p;if(g){if(!_.seekable)throw new ft(70)}else p=_.position;var v=_.Ob.read(_,y,w,m,p);g||(_.position+=v);var E=v;if(0>E){var q=-1;break t}if(e+=E,E<f)break;void 0!==o&&(o+=E)}q=e}return D[r>>2]=q,0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return t.Qb}},m:function(t,e,n,r,i){e=Qb(e,n);try{if(isNaN(e))return 61;var o=S(t);return Hb(o,e,r),j=[o.position>>>0,(H=o.position,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[i>>2]=j[0],A[i+4>>2]=j[1],o.rc&&0===e&&0===r&&(o.rc=null),0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return t.Qb}},D:function(t){try{var e=S(t);return Zc((t=>{var n=e.node.Wb;n.type.Sc?n.type.Sc(n,!1,(e=>{t(e?29:0)})):t(0)}))}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return t.Qb}},t:function(t,e,n,r){try{t:{var i=S(t);t=e;for(var o,s=e=0;s<n;s++){var l=D[t>>2],f=D[t+4>>2];t+=8;var _=i,w=l,m=f,p=o,y=x;if(0>m||0>p)throw new ft(28);if(null===_.Yb)throw new ft(8);if(!(2097155&_.flags))throw new ft(8);if(P(_.node.mode))throw new ft(31);if(!_.Ob.write)throw new ft(28);_.seekable&&1024&_.flags&&Hb(_,0,2);var g=void 0!==p;if(g){if(!_.seekable)throw new ft(70)}else p=_.position;var v=_.Ob.write(_,y,w,m,p,void 0);g||(_.position+=v);var E=v;if(0>E){var q=-1;break t}e+=E,void 0!==o&&(o+=E)}q=e}return D[r>>2]=q,0}catch(t){if(void 0===pt||"ErrnoError"!==t.name)throw t;return t.Qb}},sa:Yb,O:Zb,ha:$b,ca:ac,Z:bc,H:cc,la:dc,w:ec,g:fc,oa:gc,ja:hc,ea:ic,fa:jc,h:kc,l:lc,pa:mc,ra:nc,qa:oc,da:pc,ga:qc,ia:rc,na:sc,c:tc,ka:uc,ma:vc,aa:wc,V:xc,$:yc,ba:zc,S:Ac,U:Bc,Y:Cc,X:Dc,R:Ec,Q:Fc,T:Gc,_:Hc,N:Ic,W:Jc,P:Kc},Ut=function(){function a(t){if(t=t.exports,Ut=t=function Oc(t){var e,n={};for(e in t)!function(e){var r=t[e];n[e]="function"==typeof r?function(){Rt.push(e);try{return r.apply(null,arguments)}finally{O||(Rt.pop()===e||u(),St&&1===qt&&0===Rt.length&&(qt=0,Nc(Qc),"undefined"!=typeof Fibers&&Fibers.ed()))}}:r}(e);return n}(t),v=Ut.ta,ra(),N.unshift(Ut.ua),$--,i.monitorRunDependencies&&i.monitorRunDependencies($),0==$&&(null!==W&&(clearInterval(W),W=null),Q)){var e=Q;Q=null,e()}return t}var t={a:Mt};if($++,i.monitorRunDependencies&&i.monitorRunDependencies($),i.instantiateWasm)try{return i.instantiateWasm(t,a)}catch(t){y(`Module.instantiateWasm callback failed with error: ${t}`),r(t)}return function Ga(t,e){var n=V;return m||"function"!=typeof WebAssembly.instantiateStreaming||Aa(n)||"function"!=typeof fetch?Fa(n,t,e):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,t).then(e,(function(r){return y(`wasm streaming compile failed: ${r}`),y("falling back to ArrayBuffer instantiation"),Fa(n,t,e)}))))}(t,(function(t){a(t.instance)})).catch(r),{}}();i._sqlite3_vfs_find=t=>(i._sqlite3_vfs_find=Ut.va)(t),i._sqlite3_malloc=t=>(i._sqlite3_malloc=Ut.wa)(t),i._sqlite3_free=t=>(i._sqlite3_free=Ut.xa)(t),i._sqlite3_prepare_v2=(t,e,n,r,o)=>(i._sqlite3_prepare_v2=Ut.ya)(t,e,n,r,o),i._sqlite3_step=t=>(i._sqlite3_step=Ut.za)(t),i._sqlite3_column_int64=(t,e)=>(i._sqlite3_column_int64=Ut.Aa)(t,e),i._sqlite3_column_int=(t,e)=>(i._sqlite3_column_int=Ut.Ba)(t,e),i._sqlite3_finalize=t=>(i._sqlite3_finalize=Ut.Ca)(t),i._sqlite3_reset=t=>(i._sqlite3_reset=Ut.Da)(t),i._sqlite3_clear_bindings=t=>(i._sqlite3_clear_bindings=Ut.Ea)(t),i._sqlite3_value_blob=t=>(i._sqlite3_value_blob=Ut.Fa)(t),i._sqlite3_value_text=t=>(i._sqlite3_value_text=Ut.Ga)(t),i._sqlite3_value_bytes=t=>(i._sqlite3_value_bytes=Ut.Ha)(t),i._sqlite3_value_double=t=>(i._sqlite3_value_double=Ut.Ia)(t),i._sqlite3_value_int=t=>(i._sqlite3_value_int=Ut.Ja)(t),i._sqlite3_value_int64=t=>(i._sqlite3_value_int64=Ut.Ka)(t),i._sqlite3_value_type=t=>(i._sqlite3_value_type=Ut.La)(t),i._sqlite3_result_blob=(t,e,n,r)=>(i._sqlite3_result_blob=Ut.Ma)(t,e,n,r),i._sqlite3_result_double=(t,e)=>(i._sqlite3_result_double=Ut.Na)(t,e),i._sqlite3_result_error=(t,e,n)=>(i._sqlite3_result_error=Ut.Oa)(t,e,n),i._sqlite3_result_int=(t,e)=>(i._sqlite3_result_int=Ut.Pa)(t,e),i._sqlite3_result_int64=(t,e,n)=>(i._sqlite3_result_int64=Ut.Qa)(t,e,n),i._sqlite3_result_null=t=>(i._sqlite3_result_null=Ut.Ra)(t),i._sqlite3_result_text=(t,e,n,r)=>(i._sqlite3_result_text=Ut.Sa)(t,e,n,r),i._sqlite3_column_count=t=>(i._sqlite3_column_count=Ut.Ta)(t),i._sqlite3_data_count=t=>(i._sqlite3_data_count=Ut.Ua)(t),i._sqlite3_column_blob=(t,e)=>(i._sqlite3_column_blob=Ut.Va)(t,e),i._sqlite3_column_bytes=(t,e)=>(i._sqlite3_column_bytes=Ut.Wa)(t,e),i._sqlite3_column_double=(t,e)=>(i._sqlite3_column_double=Ut.Xa)(t,e),i._sqlite3_column_text=(t,e)=>(i._sqlite3_column_text=Ut.Ya)(t,e),i._sqlite3_column_type=(t,e)=>(i._sqlite3_column_type=Ut.Za)(t,e),i._sqlite3_column_name=(t,e)=>(i._sqlite3_column_name=Ut._a)(t,e),i._sqlite3_bind_blob=(t,e,n,r,o)=>(i._sqlite3_bind_blob=Ut.$a)(t,e,n,r,o),i._sqlite3_bind_double=(t,e,n)=>(i._sqlite3_bind_double=Ut.ab)(t,e,n),i._sqlite3_bind_int=(t,e,n)=>(i._sqlite3_bind_int=Ut.bb)(t,e,n),i._sqlite3_bind_int64=(t,e,n,r)=>(i._sqlite3_bind_int64=Ut.cb)(t,e,n,r),i._sqlite3_bind_null=(t,e)=>(i._sqlite3_bind_null=Ut.db)(t,e),i._sqlite3_bind_text=(t,e,n,r,o)=>(i._sqlite3_bind_text=Ut.eb)(t,e,n,r,o),i._sqlite3_bind_parameter_count=t=>(i._sqlite3_bind_parameter_count=Ut.fb)(t),i._sqlite3_bind_parameter_name=(t,e)=>(i._sqlite3_bind_parameter_name=Ut.gb)(t,e),i._sqlite3_sql=t=>(i._sqlite3_sql=Ut.hb)(t),i._sqlite3_exec=(t,e,n,r,o)=>(i._sqlite3_exec=Ut.ib)(t,e,n,r,o),i._sqlite3_errmsg=t=>(i._sqlite3_errmsg=Ut.jb)(t),i._sqlite3_declare_vtab=(t,e)=>(i._sqlite3_declare_vtab=Ut.kb)(t,e),i._sqlite3_libversion=()=>(i._sqlite3_libversion=Ut.lb)(),i._sqlite3_libversion_number=()=>(i._sqlite3_libversion_number=Ut.mb)(),i._sqlite3_changes=t=>(i._sqlite3_changes=Ut.nb)(t),i._sqlite3_close=t=>(i._sqlite3_close=Ut.ob)(t),i._sqlite3_limit=(t,e,n)=>(i._sqlite3_limit=Ut.pb)(t,e,n),i._sqlite3_open_v2=(t,e,n,r)=>(i._sqlite3_open_v2=Ut.qb)(t,e,n,r),i._sqlite3_get_autocommit=t=>(i._sqlite3_get_autocommit=Ut.rb)(t);var jd=()=>(jd=Ut.sb)(),Ot=i._malloc=t=>(Ot=i._malloc=Ut.tb)(t),Ft=i._free=t=>(Ft=i._free=Ut.ub)(t);i._RegisterExtensionFunctions=t=>(i._RegisterExtensionFunctions=Ut.vb)(t),i._set_authorizer=t=>(i._set_authorizer=Ut.wb)(t),i._create_function=(t,e,n,r,o,s)=>(i._create_function=Ut.xb)(t,e,n,r,o,s),i._update_hook=(t,e)=>(i._update_hook=Ut.yb)(t,e),i._create_module=(t,e,n,r)=>(i._create_module=Ut.zb)(t,e,n,r),i._progress_handler=(t,e)=>(i._progress_handler=Ut.Ab)(t,e),i._register_vfs=(t,e,n,r)=>(i._register_vfs=Ut.Bb)(t,e,n,r),i._getSqliteFree=()=>(i._getSqliteFree=Ut.Cb)();var Nt,Bt=i._main=(t,e)=>(Bt=i._main=Ut.Db)(t,e),db=(t,e)=>(db=Ut.Fb)(t,e),md=()=>(md=Ut.Gb)(),hd=()=>(hd=Ut.Hb)(),fd=t=>(fd=Ut.Ib)(t),gd=t=>(gd=Ut.Jb)(t),ad=t=>(ad=Ut.Kb)(t),Qc=()=>(Qc=Ut.Lb)(),$c=t=>($c=Ut.Mb)(t),bd=()=>(bd=Ut.Nb)();function pd(){function a(){if(!Nt&&(Nt=!0,i.calledRun=!0,!O)){if(i.noFSInit||dt||(dt=!0,Ib(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?Kb("stdin",i.stdin):zb("/dev/tty","/dev/stdin"),i.stdout?Kb("stdout",null,i.stdout):zb("/dev/tty","/dev/stdout"),i.stderr?Kb("stderr",null,i.stderr):zb("/dev/tty1","/dev/stderr"),Fb("/dev/stdin",0),Fb("/dev/stdout",1),Fb("/dev/stderr",1)),lt=!1,Ia(N),Ia(B),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Lt){var t=Bt;try{var e=t(0,0);E=e,Lc(e)}catch(t){Mc(t)}}if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)t=i.postRun.shift(),L.unshift(t);Ia(L)}}if(!(0<$)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)xa();Ia(F),0<$||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),a()}),1)):a())}}if(i.getTempRet0=md,i.ccall=Z,i.cwrap=(t,e,n,r)=>{var o=!n||n.every((t=>"number"===t||"boolean"===t));return"string"!==e&&o&&!r?i["_"+t]:function(){return Z(t,e,n,arguments,r)}},i.setValue=J,i.getValue=I,i.UTF8ToString=(t,e)=>t?K(q,t,e):"",i.stringToUTF8=(t,e,n)=>Sa(t,q,e,n),i.lengthBytesUTF8=Ra,Q=function od(){Nt||pd(),Nt||(Q=od)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();var Lt=!0;return i.noInitialRun&&(Lt=!1),pd(),e.ready}),n=0,r=10,i=21,o=25,s=27,l=100,f=101,_=2,w=4,m=64,p=1,y=2,g=3,v=4,E=5,x=0x7fffffffffffffffn,q=-0x8000000000000000n;class SQLiteError extends Error{constructor(t,e){super(t),this.code=e}}const k=!0;function Factory(t){const e={},r=t._getSqliteFree(),m=t._malloc(8),A=[m,m+4];function createUTF8(e){if("string"!=typeof e)return 0;const n=t.lengthBytesUTF8(e),r=t._sqlite3_malloc(n+1);return t.stringToUTF8(e,r,n+1),r}function cvt32x2ToBigInt(t,e){return BigInt(e)<<32n|0xffffffffn&BigInt(t)}const D=function(){const t=BigInt(Number.MAX_SAFE_INTEGER)>>32n,e=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(n,r){return r>t||r<e?cvt32x2ToBigInt(n,r):4294967296*r+(2147483647&n)-(2147483648&n)}}(),C=new Set;function verifyDatabase(t){if(!C.has(t))throw new SQLiteError("not a database",i)}const U=new Map;function verifyStatement(t){if(!U.has(t))throw new SQLiteError("not a statement",i)}e.bind_collection=function(t,r){verifyStatement(t);const i=Array.isArray(r),o=e.bind_parameter_count(t);for(let n=1;n<=o;++n){const o=r[i?n-1:e.bind_parameter_name(t,n)];void 0!==o&&e.bind(t,n,o)}return n},e.bind=function(t,n,r){switch(verifyStatement(t),typeof r){case"number":return r===(0|r)?e.bind_int(t,n,r):e.bind_double(t,n,r);case"string":return e.bind_text(t,n,r);default:return r instanceof Uint8Array||Array.isArray(r)?e.bind_blob(t,n,r):null===r?e.bind_null(t,n):"bigint"==typeof r?e.bind_int64(t,n,r):void 0===r?s:(console.warn("unknown binding converted to null",r),e.bind_null(t,n))}},e.bind_blob=function(){const e="sqlite3_bind_blob",n=t.cwrap(e,...decl("nnnnn:n"));return function(i,o,s){verifyStatement(i);const l=s.byteLength??s.length,f=t._sqlite3_malloc(l);t.HEAPU8.subarray(f).set(s);const _=n(i,o,f,l,r);return check(e,_,U.get(i))}}(),e.bind_parameter_count=function(){const e=t.cwrap("sqlite3_bind_parameter_count",...decl("n:n"));return function(t){verifyStatement(t);return e(t)}}(),e.bind_double=function(){const e="sqlite3_bind_double",n=t.cwrap(e,...decl("nnn:n"));return function(t,r,i){verifyStatement(t);const o=n(t,r,i);return check(e,o,U.get(t))}}(),e.bind_int=function(){const e="sqlite3_bind_int",n=t.cwrap(e,...decl("nnn:n"));return function(t,r,i){if(verifyStatement(t),i>2147483647||i<-2147483648)return o;const s=n(t,r,i);return check(e,s,U.get(t))}}(),e.bind_int64=function(){const e="sqlite3_bind_int64",n=t.cwrap(e,...decl("nnnn:n"));return function(t,r,i){if(verifyStatement(t),i>x||i<q)return o;const s=i>>32n,l=n(t,r,Number(0xffffffffn&i),Number(s));return check(e,l,U.get(t))}}(),e.bind_null=function(){const e="sqlite3_bind_null",n=t.cwrap(e,...decl("nn:n"));return function(t,r){verifyStatement(t);const i=n(t,r);return check(e,i,U.get(t))}}(),e.bind_parameter_name=function(){const e=t.cwrap("sqlite3_bind_parameter_name",...decl("n:s"));return function(t,n){verifyStatement(t);return e(t,n)}}(),e.bind_text=function(){const e="sqlite3_bind_text",n=t.cwrap(e,...decl("nnnnn:n"));return function(t,i,o){verifyStatement(t);const s=createUTF8(o),l=n(t,i,s,-1,r);return check(e,l,U.get(t))}}(),e.changes=function(){const e=t.cwrap("sqlite3_changes",...decl("n:n"));return function(t){verifyDatabase(t);return e(t)}}(),e.close=function(){const e="sqlite3_close",n=t.cwrap(e,...decl("n:n"),{async:k});return async function(t){verifyDatabase(t);const r=await n(t);return C.delete(t),check(e,r,t)}}(),e.column=function(n,r){verifyStatement(n);const i=e.column_type(n,r);switch(i){case v:return e.column_blob(n,r);case y:return e.column_double(n,r);case p:const o=e.column_int(n,r),s=t.getTempRet0();return D(o,s);case E:return null;case g:return e.column_text(n,r);default:throw new SQLiteError("unknown type",i)}},e.column_blob=function(){const n=t.cwrap("sqlite3_column_blob",...decl("nn:n"));return function(r,i){verifyStatement(r);const o=e.column_bytes(r,i),s=n(r,i);return t.HEAPU8.subarray(s,s+o)}}(),e.column_bytes=function(){const e=t.cwrap("sqlite3_column_bytes",...decl("nn:n"));return function(t,n){verifyStatement(t);return e(t,n)}}(),e.column_count=function(){const e=t.cwrap("sqlite3_column_count",...decl("n:n"));return function(t){verifyStatement(t);return e(t)}}(),e.column_double=function(){const e=t.cwrap("sqlite3_column_double",...decl("nn:n"));return function(t,n){verifyStatement(t);return e(t,n)}}(),e.column_int=function(){const e=t.cwrap("sqlite3_column_int64",...decl("nn:n"));return function(t,n){verifyStatement(t);return e(t,n)}}(),e.column_int64=function(){const e=t.cwrap("sqlite3_column_int64",...decl("nn:n"));return function(n,r){verifyStatement(n);return cvt32x2ToBigInt(e(n,r),t.getTempRet0())}}(),e.column_name=function(){const e=t.cwrap("sqlite3_column_name",...decl("nn:s"));return function(t,n){verifyStatement(t);return e(t,n)}}(),e.column_names=function(t){const n=[],r=e.column_count(t);for(let i=0;i<r;++i)n.push(e.column_name(t,i));return n},e.column_text=function(){const e=t.cwrap("sqlite3_column_text",...decl("nn:s"));return function(t,n){verifyStatement(t);return e(t,n)}}(),e.column_type=function(){const e=t.cwrap("sqlite3_column_type",...decl("nn:n"));return function(t,n){verifyStatement(t);return e(t,n)}}(),e.create_function=function(e,n,r,o,s,l,f,_){if(verifyDatabase(e),l&&!f&&!_){return check("sqlite3_create_function",t.createFunction(e,n,r,o,s,l),e)}if(!l&&f&&_){return check("sqlite3_create_function",t.createAggregate(e,n,r,o,s,f,_),e)}throw new SQLiteError("invalid function combination",i)},e.create_module=function(e,n,r,i){verifyDatabase(e);return check("sqlite3_create_module",t.createModule(e,n,r,i),e)},e.data_count=function(){const e=t.cwrap("sqlite3_data_count",...decl("n:n"));return function(t){verifyStatement(t);return e(t)}}(),e.declare_vtab=function(){const e=t.cwrap("sqlite3_declare_vtab",...decl("ns:n"));return function(t,n){return check("sqlite3_declare_vtab",e(t,n))}}(),e.exec=async function(t,r,i){for await(const n of e.statements(t,r)){let t;for(;await e.step(n)===l;)if(i){t=t??e.column_names(n);const r=e.row(n);await i(r,t)}}return n},e.run=async function(t,r,i){for await(const n of e.statements(t,r))i&&e.bind_collection(n,i),await e.step(n);return n},e.execWithParams=async function(t,n,r){let i=[];const o=[];for await(const s of e.statements(t,n))for(r&&e.bind_collection(s,r);await e.step(s)===l;){i=0===i.length?e.column_names(s):i;const t=e.row(s);o.push(t)}return{rows:o,columns:i}},e.executeBatch=async function(t,r,i){try{await e.run(t,"BEGIN EXCLUSIVE TRANSACTION",null);for(let n=0;n<r.length;n++){const o=i?i[n]:null;let s;const l=e.str_new(t,r[n]);try{const n=e.str_value(l);s=await e.prepare_v2(t,n),o&&e.bind_collection(s.stmt,o),await e.step(s.stmt)}finally{s?.stmt&&e.finalize(s.stmt),e.str_finish(l)}}return await e.run(t,"COMMIT",null),n}catch(n){await e.run(t,"ROLLBACK",null)}},e.finalize=function(){const e=t.cwrap("sqlite3_finalize",...decl("n:n"),{async:k});return async function(t){if(!U.has(t))return i;const n=await e(t);U.get(t);return U.delete(t),n}}(),e.get_autocommit=function(){const e=t.cwrap("sqlite3_get_autocommit",...decl("n:n"));return function(t){return e(t)}}(),e.libversion=function(){const e=t.cwrap("sqlite3_libversion",...decl(":s"));return function(){return e()}}(),e.libversion_number=function(){const e=t.cwrap("sqlite3_libversion_number",...decl(":n"));return function(){return e()}}(),e.limit=function(){const e=t.cwrap("sqlite3_limit",...decl("nnn:n"));return function(t,n,r){return e(t,n,r)}}(),e.open_v2=function(){const e="sqlite3_open_v2",n=t.cwrap(e,...decl("snnn:n"),{async:k});return async function(r,i,o){i=i||w|_,o=createUTF8(o);const s=await n(r,A[0],i,o),l=t.getValue(A[0],"*");return C.add(l),t._sqlite3_free(o),t.ccall("RegisterExtensionFunctions","void",["number"],[l]),check(e,s),l}}(),e.prepare_v2=function(){const e="sqlite3_prepare_v2",n=t.cwrap(e,...decl("nnnnn:n"),{async:k});return async function(r,i){const o=await n(r,i,-1,A[0],A[1]);check(e,o,r);const s=t.getValue(A[0],"*");return s?(U.set(s,r),{stmt:s,sql:t.getValue(A[1],"*")}):null}}(),e.progress_handler=function(e,n,r,i){verifyDatabase(e),t.progressHandler(e,n,r,i)},e.reset=function(){const e="sqlite3_reset",n=t.cwrap(e,...decl("n:n"),{async:k});return async function(t){verifyStatement(t);const r=await n(t);return check(e,r,U.get(t))}}(),e.result=function(t,n){switch(typeof n){case"number":n===(0|n)?e.result_int(t,n):e.result_double(t,n);break;case"string":e.result_text(t,n);break;default:if(n instanceof Uint8Array||Array.isArray(n))e.result_blob(t,n);else if(null===n)e.result_null(t);else{if("bigint"==typeof n)return e.result_int64(t,n);console.warn("unknown result converted to null",n),e.result_null(t)}}},e.result_blob=function(){const e=t.cwrap("sqlite3_result_blob",...decl("nnnn:n"));return function(n,i){const o=i.byteLength??i.length,s=t._sqlite3_malloc(o);t.HEAPU8.subarray(s).set(i),e(n,s,o,r)}}(),e.result_double=function(){const e=t.cwrap("sqlite3_result_double",...decl("nn:n"));return function(t,n){e(t,n)}}(),e.result_int=function(){const e=t.cwrap("sqlite3_result_int",...decl("nn:n"));return function(t,n){e(t,n)}}(),e.result_int64=function(){const e=t.cwrap("sqlite3_result_int64",...decl("nnn:n"));return function(t,n){if(n>x||n<q)return o;const r=n>>32n;e(t,Number(0xffffffffn&n),Number(r))}}(),e.result_null=function(){const e=t.cwrap("sqlite3_result_null",...decl("n:n"));return function(t){e(t)}}(),e.result_text=function(){const e=t.cwrap("sqlite3_result_text",...decl("nnnn:n"));return function(t,n){const i=createUTF8(n);e(t,i,-1,r)}}(),e.row=function(n){const r=[],i=e.data_count(n);for(let o=0;o<i;++o){const i=e.column(n,o);r.push(i?.buffer===t.HEAPU8.buffer?i.slice():i)}return r},e.set_authorizer=function(e,n,r){verifyDatabase(e);return check("sqlite3_set_authorizer",t.setAuthorizer(e,n,r),e)},e.sql=function(){const e=t.cwrap("sqlite3_sql",...decl("n:s"));return function(t){verifyStatement(t);return e(t)}}(),e.statements=function(t,n){return async function*(){const r=e.str_new(t,n);let i={stmt:null,sql:e.str_value(r)};try{for(;i=await e.prepare_v2(t,i.sql);)yield i.stmt,e.finalize(i.stmt),i.stmt=null}finally{i?.stmt&&e.finalize(i.stmt),e.str_finish(r)}}()},e.step=function(){const e="sqlite3_step",n=t.cwrap(e,...decl("n:n"),{async:k});return async function(t){verifyStatement(t);const r=await n(t);return check(e,r,U.get(t),[l,f])}}();let O=0;const F=new Map;function check(e,r,i=null,o=[n]){if(o.includes(r))return r;const s=i?t.ccall("sqlite3_errmsg","string",["number"],[i]):e;throw new SQLiteError(s,r)}return e.str_new=function(e,n=""){const r=t.lengthBytesUTF8(n),i=4294967295&O++,o={offset:t._sqlite3_malloc(r+1),bytes:r};return F.set(i,o),t.stringToUTF8(n,o.offset,o.bytes+1),i},e.str_appendall=function(e,n){if(!F.has(e))throw new SQLiteError("not a string",i);const r=F.get(e),o=t.lengthBytesUTF8(n),s=r.bytes+o,l=t._sqlite3_malloc(s+1);t.HEAPU8.subarray(l,l+s+1).set(t.HEAPU8.subarray(r.offset,r.offset+r.bytes)),t.stringToUTF8(n,l+r.bytes,o+1),t._sqlite3_free(r.offset),r.offset=l,r.bytes=s,F.set(e,r)},e.str_finish=function(e){if(!F.has(e))throw new SQLiteError("not a string",i);const n=F.get(e);F.delete(e),t._sqlite3_free(n.offset)},e.str_value=function(t){if(!F.has(t))throw new SQLiteError("not a string",i);return F.get(t).offset},e.update_hook=function(e,r){return verifyDatabase(e),t.updateHook(e,r),n},e.user_data=function(e){return t.getFunctionUserData(e)},e.value=function(n){const r=e.value_type(n);switch(r){case v:return e.value_blob(n);case y:return e.value_double(n);case p:const i=e.value_int(n),o=t.getTempRet0();return D(i,o);case E:return null;case g:return e.value_text(n);default:throw new SQLiteError("unknown type",r)}},e.value_blob=function(){const n=t.cwrap("sqlite3_value_blob",...decl("n:n"));return function(r){const i=e.value_bytes(r),o=n(r);return t.HEAPU8.subarray(o,o+i)}}(),e.value_bytes=function(){const e=t.cwrap("sqlite3_value_bytes",...decl("n:n"));return function(t){return e(t)}}(),e.value_double=function(){const e=t.cwrap("sqlite3_value_double",...decl("n:n"));return function(t){return e(t)}}(),e.value_int=function(){const e=t.cwrap("sqlite3_value_int64",...decl("n:n"));return function(t){return e(t)}}(),e.value_int64=function(){const e=t.cwrap("sqlite3_value_int64",...decl("n:n"));return function(n){return cvt32x2ToBigInt(e(n),t.getTempRet0())}}(),e.value_text=function(){const e=t.cwrap("sqlite3_value_text",...decl("n:s"));return function(t){return e(t)}}(),e.value_type=function(){const e=t.cwrap("sqlite3_value_type",...decl("n:n"));return function(t){return e(t)}}(),e.vfs_register=function(e,n){return check("sqlite3_vfs_register",t.registerVFS(e,n))},e}function decl(t){const e=[],n=t.match(/([ns@]*):([nsv@])/);switch(n[2]){case"n":e.push("number");break;case"s":e.push("string");break;case"v":e.push(null)}const r=[];for(let t of n[1])switch(t){case"n":r.push("number");break;case"s":r.push("string")}return e.push(r),e}class Base{mxPathName=64;xClose(t){return r}xRead(t,e,n){return r}xWrite(t,e,n){return r}xTruncate(t,e){return r}xSync(t,e){return n}xFileSize(t,e){return r}xLock(t,e){return n}xUnlock(t,e){return n}xCheckReservedLock(t,e){return e.setInt32(0,0,!0),n}xFileControl(t,e,n){return 12}xSectorSize(t){return 512}xDeviceCharacteristics(t){return 0}xOpen(t,e,n,r){return 14}xDelete(t,e){return r}xAccess(t,e,n){return r}handleAsync(t){return t()}}[256,2048,512,4096,1024,8192,16384].reduce(((t,e)=>t|e));class WebLocksBase{get state(){return this.#t}#t=0;timeoutMillis=0;#e=new Map;#n=Promise.resolve(0);async lock(t){return this.#r(this.#i,t)}async unlock(t){return this.#r(this.#o,t)}async isSomewhereReserved(){throw new Error("unimplemented")}async#r(t,e){const r=7&e;try{const call=()=>t.call(this,r);return await(this.#n=this.#n.then(call,call)),this.#t=r,n}catch(t){return"AbortError"===t.name?5:(console.error(t),3850)}}async#i(t){if(t===this.#t)return n;switch(this.#t){case 0:if(1===t)return this._NONEtoSHARED();throw new Error(`unexpected transition ${this.#t} -> ${t}`);case 1:switch(t){case 2:return this._SHAREDtoRESERVED();case 4:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${this.#t} -> ${t}`)}case 2:if(4===t)return this._RESERVEDtoEXCLUSIVE();throw new Error(`unexpected transition ${this.#t} -> ${t}`);default:throw new Error(`unexpected transition ${this.#t} -> ${t}`)}}async#o(t){if(t===this.#t)return n;switch(this.#t){case 4:switch(t){case 1:return this._EXCLUSIVEtoSHARED();case 0:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${this.#t} -> ${t}`)}case 2:switch(t){case 1:return this._RESERVEDtoSHARED();case 0:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${this.#t} -> ${t}`)}case 1:if(0===t)return this._SHAREDtoNONE();throw new Error(`unexpected transition ${this.#t} -> ${t}`);default:throw new Error(`unexpected transition ${this.#t} -> ${t}`)}}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(t,e){return new Promise((async(n,r)=>{try{await navigator.locks.request(t,e,(e=>{if(n(e),e)return new Promise((e=>this.#e.set(t,e)))}))}catch(t){r(t)}}))}_releaseWebLock(t){this.#e.get(t)?.(),this.#e.delete(t)}async _pollWebLock(t){const e=await navigator.locks.query();return e.held.find((({name:e})=>e===t))?.mode}_getTimeoutSignal(){if(this.timeoutMillis){const t=new AbortController;return setTimeout((()=>t.abort()),this.timeoutMillis),t.signal}}}class WebLocksExclusive extends WebLocksBase{constructor(t){super(),this._lockName=t+"-outer",this._reservedName=t+"-reserved"}async isSomewhereReserved(){return"exclusive"===await this._pollWebLock(this._reservedName)}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}}let A=0;const D=new WeakMap;class IDBContext{#a;#s;#c;#u=null;#l=0;#f=Promise.resolve();#b=Promise.resolve();constructor(t,e={durability:"default"}){this.#s=Promise.resolve(t).then((t=>this.#a=t)),this.#c=e}async close(){const t=this.#a??await this.#s;await this.#f,await this.sync(),t.close()}async run(t,e){const n=this.#f.then((()=>this.#d(t,e)));return this.#f=n.catch((()=>{})),n}async#d(t,e){const n=this.#a??await this.#s;if("readwrite"===t&&"readonly"===this.#u?.mode)this.#u=null;else if(performance.now()-this.#l>5e3){try{this.#u?.commit()}catch(t){if("InvalidStateError"!==t.name)throw t}await new Promise((t=>setTimeout(t))),this.#u=null}for(let r=0;r<2;++r){if(!this.#u){this.#u=n.transaction(n.objectStoreNames,t,this.#c);const e=this.#l=performance.now();this.#b=this.#b.then((()=>new Promise(((t,n)=>{this.#u.addEventListener("complete",(e=>{t(),this.#u===e.target&&(this.#u=null),D.get(e.target)})),this.#u.addEventListener("abort",(t=>{console.warn("tx abort",(performance.now()-e)/1e3);const r=t.target.error;n(r),this.#u===t.target&&(this.#u=null),D.get(t.target)}))})))),D.set(this.#u,A++)}try{const t=Object.fromEntries(Array.from(n.objectStoreNames,(t=>[t,new ObjectStore(this.#u.objectStore(t))])));return await e(t)}catch(t){if(this.#u=null,r)throw t}}}async sync(){await this.#f,await this.#b,this.#b=Promise.resolve()}}function wrapRequest(t){return new Promise(((e,n)=>{t.addEventListener("success",(()=>e(t.result))),t.addEventListener("error",(()=>n(t.error)))}))}class ObjectStore{#h;constructor(t){this.#h=t}get(t){this.#h.name;return wrapRequest(this.#h.get(t))}getAll(t,e){this.#h.name;return wrapRequest(this.#h.getAll(t,e))}getKey(t){this.#h.name;return wrapRequest(this.#h.getKey(t))}getAllKeys(t,e){this.#h.name;return wrapRequest(this.#h.getAllKeys(t,e))}put(t,e){this.#h.name;return wrapRequest(this.#h.put(t,e))}delete(t){this.#h.name;return wrapRequest(this.#h.delete(t))}clear(){this.#h.name;return wrapRequest(this.#h.clear())}index(t){return new Index(this.#h.index(t))}}class Index{#_;constructor(t){this.#_=t}getAllKeys(t,e){this.#_.objectStore.name,this.#_.name;return wrapRequest(this.#_.getAllKeys(t,e))}}const C={durability:"default",purge:"deferred",purgeAtLeast:16};class IDBBatchAtomicVFS extends Base{#w;#m=new Map;#p;#y=new Set;#g=performance.now();#v=new Set;constructor(t="wa-sqlite",e=C){super(),this.name=t,this.#w=Object.assign({},C,e),this.#p=new IDBContext(function openDatabase(t){return new Promise(((e,n)=>{const r=globalThis.indexedDB.open(t,5);r.addEventListener("upgradeneeded",(function(){r.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])})),r.addEventListener("success",(()=>{e(r.result)})),r.addEventListener("error",(()=>{n(r.error)}))}))}(t),{durability:this.#w.durability})}async close(){for(const t of this.#m.keys())await this.xClose(t);await(this.#p?.close()),this.#p=null}xOpen(t,e,r,i){return this.handleAsync((async()=>{null===t&&(t=`null_${e}`),e.toString(16),r.toString(16);try{const o=new URL(t,"http://localhost/"),s={path:o.pathname,flags:r,block0:null,isMetadataChanged:!0,locks:new WebLocksExclusive(o.pathname)};return this.#m.set(e,s),await this.#p.run("readwrite",(async({blocks:t})=>{if(s.block0=await t.get(this.#E(s,0)),!s.block0){if(!(r&w))throw new Error(`file not found: ${s.path}`);s.block0={path:s.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},t.put(s.block0)}})),i.setInt32(0,1&r,!0),n}catch(t){return console.error(t),14}}))}xClose(t){return this.handleAsync((async()=>{try{const e=this.#m.get(t);return e&&(e.path,this.#m.delete(t),8&e.flags&&this.#p.run("readwrite",(({blocks:t})=>{t.delete(IDBKeyRange.bound([e.path],[e.path,[]]))}))),n}catch(t){return console.error(t),r}}))}xRead(t,e,i){return this.handleAsync((async()=>{const o=this.#m.get(t);o.path,e.byteLength;try{return await this.#p.run("readonly",(async({blocks:t})=>{let r=0;for(;r<e.byteLength;){const n=i+r,s=n<o.block0.data.byteLength?o.block0:await t.get(this.#E(o,-n));if(!s||s.data.byteLength-s.offset<=n)return e.fill(0,r),522;const l=e.subarray(r),f=n+s.offset,_=Math.min(Math.max(s.data.byteLength-f,0),l.byteLength);l.set(s.data.subarray(f,f+_)),r+=_}return n}))}catch(t){return console.error(t),r}}))}xWrite(t,e,n){const r=this.#v.has(t);if(r||performance.now()-this.#g>3e3){const i=this.handleAsync((async()=>{this.handleAsync!==super.handleAsync&&this.#v.add(t),await new Promise((t=>setTimeout(t)));const r=this.#x(t,e,n);return this.#g=performance.now(),r}));return r&&this.#v.delete(t),i}return this.#x(t,e,n)}#x(t,e,i){const o=this.#m.get(t);o.path,e.byteLength;try{const t=o.block0.fileSize;o.block0.fileSize<i+e.byteLength&&(o.block0.fileSize=i+e.byteLength,o.isMetadataChanged=!0);const r=0===i?o.block0:{path:o.path,offset:-i,version:o.block0.version,data:null};return r.data=e.slice(),o.changedPages?(t===o.block0.fileSize&&o.changedPages.add(-i),0!==i&&this.#p.run("readwrite",(({blocks:t})=>t.put(r)))):this.#p.run("readwrite",(({blocks:t})=>t.put(r))),o.isMetadataChanged=0!==i&&o.isMetadataChanged,n}catch(t){return console.error(t),r}}xTruncate(t,e){const i=this.#m.get(t);i.path;try{Object.assign(i.block0,{fileSize:e,data:i.block0.data.slice(0,e)});const t=Object.assign({},i.block0);return this.#p.run("readwrite",(({blocks:n})=>{n.delete(this.#E(i,-1/0,-e)),n.put(t)})),n}catch(t){return console.error(t),r}}xSync(t,e){const r=this.#v.has(t);if(r||"relaxed"!==this.#w.durability||performance.now()-this.#g>3e3){const n=this.handleAsync((async()=>{this.handleAsync!==super.handleAsync&&this.#v.add(t);const n=await this.#q(t,e);return this.#g=performance.now(),n}));return r&&this.#v.delete(t),n}return this.#m.get(t).path,n}async#q(t,e){const i=this.#m.get(t);i.path;try{i.isMetadataChanged&&(this.#p.run("readwrite",(async({blocks:t})=>{await t.put(i.block0)})),i.isMetadataChanged=!1),await this.#p.sync()}catch(t){return console.error(t),r}return n}xFileSize(t,e){const r=this.#m.get(t);return r.path,e.setBigInt64(0,BigInt(r.block0.fileSize),!0),n}xLock(t,e){return this.handleAsync((async()=>{const i=this.#m.get(t);i.path;try{const t=await i.locks.lock(e);return t===n&&1===i.locks.state&&(i.block0=await this.#p.run("readonly",(({blocks:t})=>t.get(this.#E(i,0))))),t}catch(t){return console.error(t),r}}))}xUnlock(t,e){return this.handleAsync((async()=>{const n=this.#m.get(t);n.path;try{return n.locks.unlock(e)}catch(t){return console.error(t),r}}))}xCheckReservedLock(t,e){return this.handleAsync((async()=>{const r=this.#m.get(t);r.path;const i=await r.locks.isSomewhereReserved();return e.setInt32(0,i?1:0,!0),n}))}xSectorSize(t){return 512}xDeviceCharacteristics(t){return 19968}xFileControl(t,e,i){const o=this.#m.get(t);switch(o.path,e){case 11:return o.overwrite=!0,n;case 21:if(o.overwrite)try{return this.handleAsync((async()=>(await this.#S(o),n)))}catch(t){return console.error(t),r}if(o.isMetadataChanged)try{this.#p.run("readwrite",(async({blocks:t})=>{await t.put(o.block0)})),o.isMetadataChanged=!1}catch(t){return console.error(t),r}return n;case 22:return o.overwrite=!1,n;case 31:return this.handleAsync((async()=>{try{return o.block0.version--,o.changedPages=new Set,this.#p.run("readwrite",(async({blocks:t})=>{const e=await t.index("version").getAllKeys(IDBKeyRange.bound([o.path],[o.path,o.block0.version]));for(const n of e)t.delete(n)})),n}catch(t){return console.error(t),r}}));case 32:try{const t=Object.assign({},o.block0);t.data=t.data.slice();const e=o.changedPages;return o.changedPages=null,o.isMetadataChanged=!1,this.#p.run("readwrite",(async({blocks:n})=>{n.put(t);const r=await n.get([o.path,"purge",0])??{path:o.path,offset:"purge",version:0,data:new Map,count:0};r.count+=e.size;for(const n of e)r.data.set(n,t.version);n.put(r),this.#k(o.path,r.count)})),n}catch(t){return console.error(t),r}case 33:return this.handleAsync((async()=>{try{return o.changedPages=null,o.isMetadataChanged=!1,o.block0=await this.#p.run("readonly",(({blocks:t})=>t.get([o.path,0,o.block0.version+1]))),n}catch(t){return console.error(t),r}}));default:return 12}}xAccess(t,e,i){return this.handleAsync((async()=>{try{const e=new URL(t,"file://localhost/").pathname,r=await this.#p.run("readonly",(({blocks:t})=>t.getKey(this.#E({path:e},0))));return i.setInt32(0,r?1:0,!0),n}catch(t){return console.error(t),r}}))}xDelete(t,e){return this.handleAsync((async()=>{const i=new URL(t,"file://localhost/").pathname;try{return this.#p.run("readwrite",(({blocks:t})=>t.delete(IDBKeyRange.bound([i],[i,[]])))),e&&await this.#p.sync(),n}catch(t){return console.error(t),r}}))}async purge(t){Date.now();await this.#p.run("readwrite",(async({blocks:e})=>{const n=await e.get([t,"purge",0]);if(n){for(const[r,i]of n.data)e.delete(IDBKeyRange.bound([t,r,i],[t,r,1/0],!0,!1));await e.delete([t,"purge",0])}n?.data.size,Date.now()}))}#k(t,e){"manual"===this.#w.purge||this.#y.has(t)||e<this.#w.purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback((()=>{this.purge(t),this.#y.delete(t)})):setTimeout((()=>{this.purge(t),this.#y.delete(t)})),this.#y.add(t))}#E(t,e,n=0){const r=!e||-e<t.block0.data.length?-1/0:t.block0.version;return IDBKeyRange.bound([t.path,e,r],[t.path,n,1/0])}async#S(t){const e=t.block0.data.length;if(e<18)return;const n=new DataView(t.block0.data.buffer,t.block0.data.byteOffset);let r=n.getUint16(16);if(1===r&&(r=65536),r===e)return;const i=Math.max(e,r),o=i/e,s=i/r,l=n.getUint32(28)*r,f=t.block0.version;await this.#p.run("readwrite",(async({blocks:e})=>{const n=await e.index("version").getAllKeys(IDBKeyRange.bound([t.path,f+1],[t.path,1/0]));for(const t of n)e.delete(t);e.delete([t.path,"purge",0]);for(let n=0;n<l;n+=i){const _=await e.getAll(IDBKeyRange.lowerBound([t.path,-(n+i),1/0]),o);for(const t of _)e.delete([t.path,t.offset,t.version]);if(1===s){const i=new Uint8Array(r);for(const t of _)i.set(t.data,-(n+t.offset));const o={path:t.path,offset:-n,version:f,data:i};0===o.offset&&(o.fileSize=l,t.block0=o),e.put(o)}else{const i=_[0];for(let o=0;o<s;++o){const s=-(n+o*r);if(-s>=l)break;const _={path:i.path,offset:s,version:f,data:i.data.subarray(o*r,(o+1)*r)};0===_.offset&&(_.fileSize=l,t.block0=_),e.put(_)}}}}))}}window.sqlite={sqlite3:null,dotNetRef:null,test:function(){console.log("Junk"),async function hello(){return await async function open2(){const t=Factory(await e());t.vfs_register(new IDBBatchAtomicVFS("dbName"));return await t.open_v2("myAppName",w|_|m,"dbName")}()}()},open:async function(t,n){const r=Factory(await e());r.vfs_register(new IDBBatchAtomicVFS(n));const i=await r.open_v2(t,w|_|m,n);return sqlite.sqlite3=r,i},close:async function(t){return await sqlite.sqlite3.close(t)},execute:async function(t,e){let n={response:null,result:"",error:""};try{let r=await sqlite.sqlite3.exec(t,e,((t,e)=>{n.result=t[0],console.log(e)}));return n.response=r,n}catch(t){return n.error=t.message,n}},query:async function(t,e){let n={result:[]};try{await sqlite.sqlite3.exec(t,e,((t,e)=>{let r=0,i={};for(;r<t.length;)i[e[r]]=t[r],r++;n.result.push(i)}));return console.log(JSON.stringify(n)),n.result}catch(t){console.error(t.message)}},showPrompt:async function(t){return prompt(t,"Type anything here")}}})(),window.sqliteWasm={}.default})();
//# sourceMappingURL=sqlite.min.js.map