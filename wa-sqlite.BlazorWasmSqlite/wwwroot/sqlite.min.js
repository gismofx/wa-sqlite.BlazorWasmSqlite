(()=>{"use strict";var e={77:(e,t,n)=>{e.exports=n.p+"f15c5abb5734f68d0037.wasm"}},t={};function __webpack_require__(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,__webpack_require__),i.exports}__webpack_require__.m=e,__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),__webpack_require__.b=document.baseURI||self.location.href;var n;const r=(n="file:///C:/Users/chadp/source/repos/wa-sqlite.BlazorWasmSqlite/wa-sqlite.BlazorWasmSqlite/NpmJS/node_modules/wa-sqlite/dist/wa-sqlite-async.mjs",function(e={}){var t,r,i=e;i.ready=new Promise(((e,n)=>{t=e,r=n}));var o,s=Object.assign({},i),l="./this.program",ea=(e,t)=>{throw t},f="object"==typeof window,_="function"==typeof importScripts,w="";(f||_)&&(_?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),n&&(w=n),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_&&(o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var m,p=i.print||console.log.bind(console),y=i.printErr||console.error.bind(console);Object.assign(i,s),s=null,i.thisProgram&&(l=i.thisProgram),i.quit&&(ea=i.quit),i.wasmBinary&&(m=i.wasmBinary);var g=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&u("no native wasm support detected");var v,E,q,x,k,A,D,C,U,O=!1;function ra(){var e=v.buffer;i.HEAP8=q=new Int8Array(e),i.HEAP16=k=new Int16Array(e),i.HEAPU8=x=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=A=new Int32Array(e),i.HEAPU32=D=new Uint32Array(e),i.HEAPF32=C=new Float32Array(e),i.HEAPF64=U=new Float64Array(e)}var F=[],N=[],B=[],L=[],z=0;function xa(){var e=i.preRun.shift();F.unshift(e)}var V,H,j,$=0,W=null,Q=null;function u(e){throw i.onAbort&&i.onAbort(e),y(e="Aborted("+e+")"),O=!0,E=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),r(e),e}function Aa(e){return e.startsWith("data:application/octet-stream;base64,")}if(i.locateFile){if(!Aa(V="wa-sqlite-async.wasm")){var X=V;V=i.locateFile?i.locateFile(X,w):w+X}}else V=new URL(__webpack_require__(77),__webpack_require__.b).href;function Da(e){if(e==V&&m)return new Uint8Array(m);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}function Fa(e,t,n){return function Ea(e){return m||!f&&!_||"function"!=typeof fetch?Promise.resolve().then((()=>Da(e))):fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>Da(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{y(`failed to asynchronously prepare wasm: ${e}`),u(e)}))}function Ha(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var Ia=e=>{for(;0<e.length;)e.shift()(i)};function I(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return q[0|e];case"i16":return k[e>>1];case"i32":return A[e>>2];case"i64":u("to do getValue(i64) use WASM_BIGINT");case"float":return C[e>>2];case"double":return U[e>>3];case"*":return D[e>>2];default:u(`invalid type for getValue: ${t}`)}}function J(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":q[0|e]=t;break;case"i16":k[e>>1]=t;break;case"i32":A[e>>2]=t;break;case"i64":u("to do setValue(i64) use WASM_BIGINT");case"float":C[e>>2]=t;break;case"double":U[e>>3]=t;break;case"*":D[e>>2]=t;break;default:u(`invalid type for setValue: ${n}`)}}var Y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,K=(e,t,n)=>{var r=t+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&Y)return Y.decode(e.subarray(t,n));for(r="";t<n;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|o);else{var s=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|s:(7&i)<<18|o<<12|s<<6|63&e[t++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r},Ka=(e,t)=>{for(var n=0,r=e.length-1;0<=r;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},M=e=>{var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=Ka(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},La=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],e||t?(t&&(t=t.substr(0,t.length-1)),e+t):"."},Ma=e=>{if("/"===e)return"/";var t=(e=(e=M(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},Oa=e=>(Oa=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);u("initRandomDevice")})())(e);function Pa(){for(var e="",t=!1,n=arguments.length-1;-1<=n&&!t;n--){if("string"!=typeof(t=0<=n?arguments[n]:"/"))throw new TypeError("Arguments to path.resolve must be strings");if(!t)return"";e=t+"/"+e,t="/"===t.charAt(0)}return(t?"/":"")+(e=Ka(e.split("/").filter((e=>!!e)),!t).join("/"))||"."}var G=[],Ra=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t},Sa=(e,t,n,r)=>{if(!(0<r))return 0;var i=n;r=n+r-1;for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),127>=s){if(n>=r)break;t[n++]=s}else{if(2047>=s){if(n+1>=r)break;t[n++]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;t[n++]=224|s>>12}else{if(n+3>=r)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63}t[n++]=128|s>>6&63}t[n++]=128|63&s}}return t[n]=0,n-i},ee=[];function Ua(e,t){ee[e]={input:[],Tb:[],dc:t},Va(e,te)}var te={open(e){var t=ee[e.node.hc];if(!t)throw new fe(43);e.Ub=t,e.seekable=!1},close(e){e.Ub.dc.kc(e.Ub)},kc(e){e.Ub.dc.kc(e.Ub)},read(e,t,n,r){if(!e.Ub||!e.Ub.dc.zc)throw new fe(60);for(var i=0,o=0;o<r;o++){try{var s=e.Ub.dc.zc(e.Ub)}catch(e){throw new fe(29)}if(void 0===s&&0===i)throw new fe(6);if(null==s)break;i++,t[n+o]=s}return i&&(e.node.timestamp=Date.now()),i},write(e,t,n,r){if(!e.Ub||!e.Ub.dc.tc)throw new fe(60);try{for(var i=0;i<r;i++)e.Ub.dc.tc(e.Ub,t[n+i])}catch(e){throw new fe(29)}return r&&(e.node.timestamp=Date.now()),i}},ne={zc(){e:{if(!G.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e){var t=null;break e}t=Array(Ra(e)+1),e=Sa(e,t,0,t.length),t.length=e,G=t}t=G.shift()}return t},tc(e,t){null===t||10===t?(p(K(e.Tb,0)),e.Tb=[]):0!=t&&e.Tb.push(t)},kc(e){e.Tb&&0<e.Tb.length&&(p(K(e.Tb,0)),e.Tb=[])},$c:()=>({Wc:25856,Yc:5,Vc:191,Xc:35387,Uc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ad:()=>0,bd:()=>[24,80]},re={tc(e,t){null===t||10===t?(y(K(e.Tb,0)),e.Tb=[]):0!=t&&e.Tb.push(t)},kc(e){e.Tb&&0<e.Tb.length&&(y(K(e.Tb,0)),e.Tb=[])}};function Za(e,t){var n=e.Pb?e.Pb.length:0;n>=t||(t=Math.max(t,n*(1048576>n?2:1.125)>>>0),0!=n&&(t=Math.max(t,256)),n=e.Pb,e.Pb=new Uint8Array(t),0<e.Rb&&e.Pb.set(n.subarray(0,e.Rb),0))}var ie={Xb:null,Wb:()=>ie.createNode(null,"/",16895,0),createNode(e,t,n,r){if(24576==(61440&n)||4096==(61440&n))throw new fe(63);return ie.Xb||(ie.Xb={dir:{node:{Vb:ie.Eb.Vb,Sb:ie.Eb.Sb,ec:ie.Eb.ec,lc:ie.Eb.lc,Dc:ie.Eb.Dc,qc:ie.Eb.qc,oc:ie.Eb.oc,Cc:ie.Eb.Cc,pc:ie.Eb.pc},stream:{ac:ie.Ob.ac}},file:{node:{Vb:ie.Eb.Vb,Sb:ie.Eb.Sb},stream:{ac:ie.Ob.ac,read:ie.Ob.read,write:ie.Ob.write,wc:ie.Ob.wc,mc:ie.Ob.mc,nc:ie.Ob.nc}},link:{node:{Vb:ie.Eb.Vb,Sb:ie.Eb.Sb,ic:ie.Eb.ic},stream:{}},xc:{node:{Vb:ie.Eb.Vb,Sb:ie.Eb.Sb},stream:he}}),P((n=ab(e,t,n,r)).mode)?(n.Eb=ie.Xb.dir.node,n.Ob=ie.Xb.dir.stream,n.Pb={}):32768==(61440&n.mode)?(n.Eb=ie.Xb.file.node,n.Ob=ie.Xb.file.stream,n.Rb=0,n.Pb=null):40960==(61440&n.mode)?(n.Eb=ie.Xb.link.node,n.Ob=ie.Xb.link.stream):8192==(61440&n.mode)&&(n.Eb=ie.Xb.xc.node,n.Ob=ie.Xb.xc.stream),n.timestamp=Date.now(),e&&(e.Pb[t]=n,e.timestamp=n.timestamp),n},Zc:e=>e.Pb?e.Pb.subarray?e.Pb.subarray(0,e.Rb):new Uint8Array(e.Pb):new Uint8Array(0),Eb:{Vb(e){var t={};return t.Jc=8192==(61440&e.mode)?e.id:1,t.Ac=e.id,t.mode=e.mode,t.Pc=1,t.uid=0,t.Mc=0,t.hc=e.hc,P(e.mode)?t.size=4096:32768==(61440&e.mode)?t.size=e.Rb:40960==(61440&e.mode)?t.size=e.link.length:t.size=0,t.Fc=new Date(e.timestamp),t.Oc=new Date(e.timestamp),t.Ic=new Date(e.timestamp),t.Gc=4096,t.Hc=Math.ceil(t.size/t.Gc),t},Sb(e,t){if(void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&(t=t.size,e.Rb!=t))if(0==t)e.Pb=null,e.Rb=0;else{var n=e.Pb;e.Pb=new Uint8Array(t),n&&e.Pb.set(n.subarray(0,Math.min(t,e.Rb))),e.Rb=t}},ec(){throw be[44]},lc:(e,t,n,r)=>ie.createNode(e,t,n,r),Dc(e,t,n){if(P(e.mode)){try{var r=cb(t,n)}catch(e){}if(r)for(var i in r.Pb)throw new fe(55)}delete e.parent.Pb[e.name],e.parent.timestamp=Date.now(),e.name=n,t.Pb[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},qc(e,t){delete e.Pb[t],e.timestamp=Date.now()},oc(e,t){var n,r=cb(e,t);for(n in r.Pb)throw new fe(55);delete e.Pb[t],e.timestamp=Date.now()},Cc(e){var t,n=[".",".."];for(t in e.Pb)e.Pb.hasOwnProperty(t)&&n.push(t);return n},pc:(e,t,n)=>((e=ie.createNode(e,t,41471,0)).link=n,e),ic(e){if(40960!=(61440&e.mode))throw new fe(28);return e.link}},Ob:{read(e,t,n,r,i){var o=e.node.Pb;if(i>=e.node.Rb)return 0;if(8<(e=Math.min(e.node.Rb-i,r))&&o.subarray)t.set(o.subarray(i,i+e),n);else for(r=0;r<e;r++)t[n+r]=o[i+r];return e},write(e,t,n,r,i,o){if(t.buffer===q.buffer&&(o=!1),!r)return 0;if((e=e.node).timestamp=Date.now(),t.subarray&&(!e.Pb||e.Pb.subarray)){if(o)return e.Pb=t.subarray(n,n+r),e.Rb=r;if(0===e.Rb&&0===i)return e.Pb=t.slice(n,n+r),e.Rb=r;if(i+r<=e.Rb)return e.Pb.set(t.subarray(n,n+r),i),r}if(Za(e,i+r),e.Pb.subarray&&t.subarray)e.Pb.set(t.subarray(n,n+r),i);else for(o=0;o<r;o++)e.Pb[i+o]=t[n+o];return e.Rb=Math.max(e.Rb,i+r),r},ac(e,t,n){if(1===n?t+=e.position:2===n&&32768==(61440&e.node.mode)&&(t+=e.node.Rb),0>t)throw new fe(28);return t},wc(e,t,n){Za(e.node,t+n),e.node.Rb=Math.max(e.node.Rb,t+n)},mc(e,t,n,r,i){if(32768!=(61440&e.node.mode))throw new fe(43);if(e=e.node.Pb,2&i||e.buffer!==q.buffer){if((0<n||n+t<e.length)&&(e=e.subarray?e.subarray(n,n+t):Array.prototype.slice.call(e,n,n+t)),n=!0,t=65536*Math.ceil(t/65536),(i=db(65536,t))?(x.fill(0,i,i+t),t=i):t=0,!t)throw new fe(48);q.set(e,t)}else n=!1,t=e.byteOffset;return{Qc:t,Ec:n}},nc:(e,t,n,r)=>(ie.Ob.write(e,t,0,r,n,!1),0)}},eb=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},oe=null,ae={},se=[],ce=1,ue=null,le=!0,fe=null,be={};function R(e,t={}){if(!(e=Pa(e)))return{path:"",node:null};if(8<(t=Object.assign({yc:!0,uc:0},t)).uc)throw new fe(32);e=e.split("/").filter((e=>!!e));for(var n=oe,r="/",i=0;i<e.length;i++){var o=i===e.length-1;if(o&&t.parent)break;if(n=cb(n,e[i]),r=M(r+"/"+e[i]),n.bc&&(!o||o&&t.yc)&&(n=n.bc.root),!o||t.$b)for(o=0;40960==(61440&n.mode);)if(n=kb(r),n=R(r=Pa(La(r),n),{uc:t.uc+1}).node,40<o++)throw new fe(32)}return{path:r,node:n}}function lb(e){for(var t;;){if(e===e.parent)return e=e.Wb.Bc,t?"/"!==e[e.length-1]?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function mb(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ue.length}function nb(e){var t=mb(e.parent.id,e.name);if(ue[t]===e)ue[t]=e.cc;else for(t=ue[t];t;){if(t.cc===e){t.cc=e.cc;break}t=t.cc}}function cb(e,t){var n;if(n=(n=ob(e,"x"))?n:e.Eb.ec?0:2)throw new fe(n,e);for(n=ue[mb(e.id,t)];n;n=n.cc){var r=n.name;if(n.parent.id===e.id&&r===t)return n}return e.Eb.ec(e,t)}function ab(e,t,n,r){return t=mb((e=new pb(e,t,n,r)).parent.id,e.name),e.cc=ue[t],ue[t]=e}function P(e){return 16384==(61440&e)}function qb(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t}function ob(e,t){return le?0:!t.includes("r")||292&e.mode?t.includes("w")&&!(146&e.mode)||t.includes("x")&&!(73&e.mode)?2:0:2}function rb(e,t){try{return cb(e,t),20}catch(e){}return ob(e,"wx")}function sb(e,t,n){try{var r=cb(e,t)}catch(e){return e.Qb}if(e=ob(e,"wx"))return e;if(n){if(!P(r.mode))return 54;if(r===r.parent||"/"===lb(r))return 10}else if(P(r.mode))return 31;return 0}function S(e){if(!(e=se[e]))throw new fe(8);return e}function ub(e,t=-1){return we||((we=function(){this.jc={}}).prototype={},Object.defineProperties(we.prototype,{object:{get(){return this.node},set(e){this.node=e}},flags:{get(){return this.jc.flags},set(e){this.jc.flags=e}},position:{get(){return this.jc.position},set(e){this.jc.position=e}}})),e=Object.assign(new we,e),-1==t&&(t=function tb(){for(var e=0;4096>=e;e++)if(!se[e])return e;throw new fe(33)}()),e.Yb=t,se[t]=e}var de,he={open(e){e.Ob=ae[e.node.hc].Ob,e.Ob.open&&e.Ob.open(e)},ac(){throw new fe(70)}};function Va(e,t){ae[e]={Ob:t}}function wb(e,t){var n="/"===t,r=!t;if(n&&oe)throw new fe(10);if(!n&&!r){var i=R(t,{yc:!1});if(t=i.path,(i=i.node).bc)throw new fe(10);if(!P(i.mode))throw new fe(54)}t={type:e,dd:{},Bc:t,Nc:[]},(e=e.Wb(t)).Wb=t,t.root=e,n?oe=e:i&&(i.bc=t,i.Wb&&i.Wb.Nc.push(t))}function xb(e,t,n){var r=R(e,{parent:!0}).node;if(!(e=Ma(e))||"."===e||".."===e)throw new fe(28);var i=rb(r,e);if(i)throw new fe(i);if(!r.Eb.lc)throw new fe(63);return r.Eb.lc(r,e,t,n)}function T(e,t){return xb(e,1023&(void 0!==t?t:511)|16384,0)}function yb(e,t,n){void 0===n&&(n=t,t=438),xb(e,8192|t,n)}function zb(e,t){if(!Pa(e))throw new fe(44);var n=R(t,{parent:!0}).node;if(!n)throw new fe(44);var r=rb(n,t=Ma(t));if(r)throw new fe(r);if(!n.Eb.pc)throw new fe(63);n.Eb.pc(n,t,e)}function Ab(e){var t=R(e,{parent:!0}).node,n=cb(t,e=Ma(e)),r=sb(t,e,!0);if(r)throw new fe(r);if(!t.Eb.oc)throw new fe(63);if(n.bc)throw new fe(10);t.Eb.oc(t,e),nb(n)}function kb(e){if(!(e=R(e).node))throw new fe(44);if(!e.Eb.ic)throw new fe(28);return Pa(lb(e.parent),e.Eb.ic(e))}function Bb(e,t){if(!(e=R(e,{$b:!t}).node))throw new fe(44);if(!e.Eb.Vb)throw new fe(63);return e.Eb.Vb(e)}function Cb(e){return Bb(e,!0)}function Db(e,t){if(!(e="string"==typeof e?R(e,{$b:!0}).node:e).Eb.Sb)throw new fe(63);e.Eb.Sb(e,{mode:4095&t|-4096&e.mode,timestamp:Date.now()})}function Eb(e,t){if(0>t)throw new fe(28);if(!(e="string"==typeof e?R(e,{$b:!0}).node:e).Eb.Sb)throw new fe(63);if(P(e.mode))throw new fe(31);if(32768!=(61440&e.mode))throw new fe(28);var n=ob(e,"w");if(n)throw new fe(n);e.Eb.Sb(e,{size:t,timestamp:Date.now()})}function Fb(e,t,n){if(""===e)throw new fe(44);if("string"==typeof t){var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(void 0===r)throw Error(`Unknown file open mode: ${t}`);t=r}if(n=64&t?4095&(void 0===n?438:n)|32768:0,"object"==typeof e)var o=e;else{e=M(e);try{o=R(e,{$b:!(131072&t)}).node}catch(e){}}if(r=!1,64&t)if(o){if(128&t)throw new fe(20)}else o=xb(e,n,0),r=!0;if(!o)throw new fe(44);if(8192==(61440&o.mode)&&(t&=-513),65536&t&&!P(o.mode))throw new fe(54);if(!r&&(n=o?40960==(61440&o.mode)?32:P(o.mode)&&("r"!==qb(t)||512&t)?31:ob(o,qb(t)):44))throw new fe(n);return 512&t&&!r&&Eb(o,0),t&=-131713,(o=ub({node:o,path:lb(o),flags:t,seekable:!0,position:0,Ob:o.Ob,Tc:[],error:!1})).Ob.open&&o.Ob.open(o),!i.logReadFiles||1&t||(me||(me={}),e in me||(me[e]=1)),o}function Hb(e,t,n){if(null===e.Yb)throw new fe(8);if(!e.seekable||!e.Ob.ac)throw new fe(70);if(0!=n&&1!=n&&2!=n)throw new fe(28);e.position=e.Ob.ac(e,t,n),e.Tc=[]}function Ib(){fe||((fe=function(e,t){this.name="ErrnoError",this.node=t,this.Rc=function(e){this.Qb=e},this.Rc(e),this.message="FS error"}).prototype=Error(),fe.prototype.constructor=fe,[44].forEach((e=>{be[e]=new fe(e),be[e].stack="<generic error, no stack>"})))}function Kb(e,t,n){e=M("/dev/"+e);var r=eb(!!t,!!n);_e||(_e=64);var i=_e++<<8;Va(i,{open(e){e.seekable=!1},close(){n&&n.buffer&&n.buffer.length&&n(10)},read(e,n,r,i){for(var o=0,s=0;s<i;s++){try{var l=t()}catch(e){throw new fe(29)}if(void 0===l&&0===o)throw new fe(6);if(null==l)break;o++,n[r+s]=l}return o&&(e.node.timestamp=Date.now()),o},write(e,t,r,i){for(var o=0;o<i;o++)try{n(t[r+o])}catch(e){throw new fe(29)}return i&&(e.node.timestamp=Date.now()),o}}),yb(e,r,i)}var _e,we,me,pe={};function Mb(e,t,n){if("/"===t.charAt(0))return t;if(e=-100===e?"/":S(e).path,0==t.length){if(!n)throw new fe(44);return e}return M(e+"/"+t)}function Nb(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&M(t)!==M(lb(e.node)))return-54;throw e}A[n>>2]=r.Jc,A[n+4>>2]=r.mode,D[n+8>>2]=r.Pc,A[n+12>>2]=r.uid,A[n+16>>2]=r.Mc,A[n+20>>2]=r.hc,j=[r.size>>>0,(H=r.size,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+24>>2]=j[0],A[n+28>>2]=j[1],A[n+32>>2]=4096,A[n+36>>2]=r.Hc,e=r.Fc.getTime(),t=r.Oc.getTime();var i=r.Ic.getTime();return j=[Math.floor(e/1e3)>>>0,(H=Math.floor(e/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+40>>2]=j[0],A[n+44>>2]=j[1],D[n+48>>2]=e%1e3*1e3,j=[Math.floor(t/1e3)>>>0,(H=Math.floor(t/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+56>>2]=j[0],A[n+60>>2]=j[1],D[n+64>>2]=t%1e3*1e3,j=[Math.floor(i/1e3)>>>0,(H=Math.floor(i/1e3),1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+72>>2]=j[0],A[n+76>>2]=j[1],D[n+80>>2]=i%1e3*1e3,j=[r.Ac>>>0,(H=r.Ac,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[n+88>>2]=j[0],A[n+92>>2]=j[1],0}var ye=void 0;function Pb(){var e=A[ye>>2];return ye+=4,e}var ge,Qb=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,ve=[0,31,60,91,121,152,182,213,244,274,305,335],Ee=[0,31,59,90,120,151,181,212,243,273,304,334],Ub=e=>{var t=Ra(e)+1,n=Oe(t);return n&&Sa(e,x,n,t),n},qe={},Xb=()=>{if(!ge){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(e in qe)void 0===qe[e]?delete t[e]:t[e]=qe[e];var n=[];for(e in t)n.push(`${e}=${t[e]}`);ge=n}return ge};function Yb(){}function Zb(){}function $b(){}function ac(){}function bc(){}function cc(){}function dc(){}function ec(){}function fc(){}function gc(){}function hc(){}function ic(){}function jc(){}function kc(){}function lc(){}function mc(){}function nc(){}function oc(){}function pc(){}function qc(){}function rc(){}function sc(){}function tc(){}function uc(){}function vc(){}function wc(){}function xc(){}function yc(){}function zc(){}function Ac(){}function Bc(){}function Cc(){}function Dc(){}function Ec(){}function Fc(){}function Gc(){}function Hc(){}function Ic(){}function Jc(){}function Kc(){}var Lc=e=>{E=e,g||0<z||(i.onExit&&i.onExit(e),O=!0),ea(e,new Ha(e))},Mc=e=>{e instanceof Ha||"unwind"==e||ea(1,e)},Nc=e=>{try{e()}catch(e){u(e)}},xe=0,Se=null,ke=0,Re=[],Ae={},Ie={},De=0,Te=null,Pe=[];function Zc(e){if(!O){if(0===xe){var t=!1,n=!1;e(((e=0)=>{if(!O&&(ke=e,t=!0,n)){xe=2,Nc((()=>$c(Se))),"undefined"!=typeof Browser&&Browser.sc.Lc&&Browser.sc.resume(),e=!1;try{var r=(0,Ue[Ie[A[Se+8>>2]]])()}catch(t){r=t,e=!0}var i=!1;if(!Se){var o=Te;o&&(Te=null,(e?o.reject:o.resolve)(r),i=!0)}if(e&&!i)throw r}})),n=!0,t||(xe=1,Se=function Yc(){var e=Oe(16396),t=e+12;D[e>>2]=t,D[e+4>>2]=t+16384,t=Re[0];var n=Ae[t];return void 0===n&&(n=De++,Ae[t]=n,Ie[n]=t),A[e+8>>2]=n,e}(),"undefined"!=typeof Browser&&Browser.sc.Lc&&Browser.sc.pause(),Nc((()=>ad(Se))))}else 2===xe?(xe=0,Nc(bd),Fe(Se),Se=null,Pe.forEach((e=>{if(!O)try{if(e(),!(g||0<z))try{E=e=E,Lc(e)}catch(e){Mc(e)}}catch(e){Mc(e)}}))):u(`invalid state: ${xe}`);return ke}}function dd(e){return Zc((t=>{e().then(t)}))}var Ce={},Z=(e,t,n,r,o)=>{function h(e){return--z,0!==f&&fd(f),"string"===t?e?K(x,e):"":"boolean"===t?!!e:e}var s={string:e=>{var t=0;if(null!=e&&0!==e){t=Ra(e)+1;var n=gd(t);Sa(e,x,n,t),t=n}return t},array:e=>{var t=gd(e.length);return q.set(e,t),t}};e=i["_"+e];var l=[],f=0;if(r)for(var _=0;_<r.length;_++){var w=s[n[_]];w?(0===f&&(f=hd()),l[_]=w(r[_])):l[_]=r[_]}return n=Se,r=e.apply(null,l),o=o&&o.async,z+=1,Se!=n?function Xc(){return new Promise(((e,t)=>{Te={resolve:e,reject:t}}))}().then(h):(r=h(r),o?Promise.resolve(r):r)};function pb(e,t,n,r){e||(e=this),this.parent=e,this.Wb=e.Wb,this.bc=null,this.id=ce++,this.name=t,this.mode=n,this.Eb={},this.Ob={},this.hc=r}Object.defineProperties(pb.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}}}),Ib(),ue=Array(4096),wb(ie,"/"),T("/tmp"),T("/home"),T("/home/web_user"),function(){T("/dev"),Va(259,{read:()=>0,write:(e,t,n,r)=>r}),yb("/dev/null",259),Ua(1280,ne),Ua(1536,re),yb("/dev/tty",1280),yb("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,c=()=>(0===t&&(t=Oa(e).byteLength),e[--t]);Kb("random",c),Kb("urandom",c),T("/dev/shm"),T("/dev/shm/tmp")}(),function(){T("/proc");var e=T("/proc/self");T("/proc/self/fd"),wb({Wb(){var t=ab(e,"fd",16895,73);return t.Eb={ec(e,t){var n=S(+t);return(e={parent:null,Wb:{Bc:"fake"},Eb:{ic:()=>n.path}}).parent=e}},t}},"/proc/self/fd")}(),function(){const e=new Map;i.setAuthorizer=function(t,n,r){return n?e.set(t,{f:n,vc:r}):e.delete(t),Z("set_authorizer","number",["number"],[t])},Yb=function(t,n,r,i,o,s){if(e.has(t)){const{f:l,vc:f}=e.get(t);return l(f,n,r?r?K(x,r):"":null,i?i?K(x,i):"":null,o?o?K(x,o):"":null,s?s?K(x,s):"":null)}return 0}}(),function(){function a(e,t){const n=[];for(let r=0;0!=e[t+r];++r){if(1e3<r)throw Error("C-string never terminated after 1k characters");n.push(e[t+r])}return String.fromCharCode(...n)}const e=new Map,t=new Map;i.createFunction=function(t,n,r,i,o,s){const l=e.size;return e.set(l,{f:s,Zb:o}),Z("create_function","number","number string number number number number".split(" "),[t,n,r,i,l,0])},i.createAggregate=function(t,n,r,i,o,s,l){const f=e.size;return e.set(f,{step:s,Kc:l,Zb:o}),Z("create_function","number","number string number number number number".split(" "),[t,n,r,i,f,1])},i.getFunctionUserData=function(e){return t.get(e)},i.updateHook=function(t,n){const r=e.size;return e.set(r,n),Z("update_hook","void",["number","number"],[t,r])},$b=function(n,r,i,o){n=e.get(n),t.set(r,n.Zb),n.f(r,new Uint32Array(x.buffer,o,i)),t.delete(r)},bc=function(n,r,i,o){n=e.get(n),t.set(r,n.Zb),n.step(r,new Uint32Array(x.buffer,o,i)),t.delete(r)},Zb=function(n,r){n=e.get(n),t.set(r,n.Zb),n.Kc(r),t.delete(r)},cc=function(t,n,r,i,o,s){t=e.get(t);const l=x;o=BigInt(s)<<32n|4294967295n&BigInt(o),t(n,a(l,r),a(l,i),o)}}(),function(){const e=new Map;i.progressHandler=function(t,n,r,i){return r?e.set(t,{f:r,vc:i}):e.delete(t),Z("progress_handler",null,["number","number"],[t,n])},ac=function(t){if(e.has(t)){const{f:n,vc:r}=e.get(t);return n(r)}return 0}}(),function(){function a(e,t){const n=`get${e}`,r=`set${e}`;return new Proxy(new DataView(x.buffer,t,"Int32"===e?4:8),{get(e,t){if(t===n)return function(n,r){if(!r)throw Error("must be little endian");return e[t](n,r)};if(t===r)return function(n,r,i){if(!i)throw Error("must be little endian");return e[t](n,r,i)};if("string"==typeof t&&t.match(/^(get)|(set)/))throw Error("invalid type");return e[t]}})}const e="object"==typeof Ce,t=new Map,n=new Map,r=new Map,o=e?new Set:null,s=e?new Set:null,l=new Map;tc=function(e,t,n,r){l.set(e?K(x,e):"",{size:t,fc:Array.from(new Uint32Array(x.buffer,r,n))})},i.createModule=function(n,r,i,o){e&&(i.handleAsync=dd);const s=t.size;return t.set(s,{module:i,Zb:o}),o=0,i.xCreate&&(o|=1),i.xConnect&&(o|=2),i.xBestIndex&&(o|=4),i.xDisconnect&&(o|=8),i.xDestroy&&(o|=16),i.xOpen&&(o|=32),i.xClose&&(o|=64),i.xFilter&&(o|=128),i.xNext&&(o|=256),i.xEof&&(o|=512),i.xColumn&&(o|=1024),i.xRowid&&(o|=2048),i.xUpdate&&(o|=4096),i.xBegin&&(o|=8192),i.xSync&&(o|=16384),i.xCommit&&(o|=32768),i.xRollback&&(o|=65536),i.xFindFunction&&(o|=131072),i.xRename&&(o|=262144),Z("create_module","number",["number","string","number","number"],[n,r,s,o])},jc=function(r,i,s,l,f,_){if(i=t.get(i),n.set(f,i),e){o.delete(f);for(const e of o)n.delete(e)}return l=Array.from(new Uint32Array(x.buffer,l,s)).map((e=>e?K(x,e):"")),i.module.xCreate(r,i.Zb,l,f,a("Int32",_))},ic=function(r,i,s,l,f,_){if(i=t.get(i),n.set(f,i),e){o.delete(f);for(const e of o)n.delete(e)}return l=Array.from(new Uint32Array(x.buffer,l,s)).map((e=>e?K(x,e):"")),i.module.xConnect(r,i.Zb,l,f,a("Int32",_))},ec=function(e,t){var r=n.get(e),i=l.get("sqlite3_index_info").fc;const o={};o.nConstraint=I(t+i[0],"i32"),o.aConstraint=[];for(var s=I(t+i[1],"*"),f=l.get("sqlite3_index_constraint").size,_=0;_<o.nConstraint;++_){var w=o.aConstraint,m=w.push,p=s+_*f,y=l.get("sqlite3_index_constraint").fc,g={};g.iColumn=I(p+y[0],"i32"),g.op=I(p+y[1],"i8"),g.usable=!!I(p+y[2],"i8"),m.call(w,g)}for(o.nOrderBy=I(t+i[2],"i32"),o.aOrderBy=[],s=I(t+i[3],"*"),f=l.get("sqlite3_index_orderby").size,_=0;_<o.nOrderBy;++_)m=(w=o.aOrderBy).push,p=s+_*f,y=l.get("sqlite3_index_orderby").fc,(g={}).iColumn=I(p+y[0],"i32"),g.desc=!!I(p+y[1],"i8"),m.call(w,g);for(o.aConstraintUsage=[],s=0;s<o.nConstraint;++s)o.aConstraintUsage.push({argvIndex:0,omit:!1});for(o.idxNum=I(t+i[5],"i32"),o.idxStr=null,o.orderByConsumed=!!I(t+i[8],"i8"),o.estimatedCost=I(t+i[9],"double"),o.estimatedRows=I(t+i[10],"i32"),o.idxFlags=I(t+i[11],"i32"),o.colUsed=I(t+i[12],"i32"),e=r.module.xBestIndex(e,o),i=I(t+(r=l.get("sqlite3_index_info").fc)[4],"*"),s=l.get("sqlite3_index_constraint_usage").size,m=0;m<o.nConstraint;++m)f=i+m*s,w=o.aConstraintUsage[m],J(f+(p=l.get("sqlite3_index_constraint_usage").fc)[0],w.argvIndex,"i32"),J(f+p[1],w.omit?1:0,"i8");return J(t+r[5],o.idxNum,"i32"),"string"==typeof o.idxStr&&(i=Ra(o.idxStr),s=Z("sqlite3_malloc","number",["number"],[i+1]),Sa(o.idxStr,x,s,i+1),J(t+r[6],s,"*"),J(t+r[7],1,"i32")),J(t+r[8],o.orderByConsumed,"i32"),J(t+r[9],o.estimatedCost,"double"),J(t+r[10],o.estimatedRows,"i32"),J(t+r[11],o.idxFlags,"i32"),e},lc=function(t){const r=n.get(t);return e?o.add(t):n.delete(t),r.module.xDisconnect(t)},kc=function(t){const r=n.get(t);return e?o.add(t):n.delete(t),r.module.xDestroy(t)},pc=function(t,i){const o=n.get(t);if(r.set(i,o),e){s.delete(i);for(const e of s)r.delete(e)}return o.module.xOpen(t,i)},fc=function(t){const n=r.get(t);return e?s.add(t):r.delete(t),n.module.xClose(t)},mc=function(e){return r.get(e).module.xEof(e)?1:0},nc=function(e,t,n,i,o){const s=r.get(e);return n=n?n?K(x,n):"":null,o=new Uint32Array(x.buffer,o,i),s.module.xFilter(e,t,n,o)},oc=function(e){return r.get(e).module.xNext(e)},gc=function(e,t,n){return r.get(e).module.xColumn(e,t,n)},sc=function(e,t){return r.get(e).module.xRowid(e,a("BigInt64",t))},vc=function(e,t,r,i){const o=n.get(e);return r=new Uint32Array(x.buffer,r,t),o.module.xUpdate(e,r,a("BigInt64",i))},dc=function(e){return n.get(e).module.xBegin(e)},uc=function(e){return n.get(e).module.xSync(e)},hc=function(e){return n.get(e).module.xCommit(e)},rc=function(e){return n.get(e).module.xRollback(e)},qc=function(e,t){const r=n.get(e);return t=t?K(x,t):"",r.module.xRename(e,t)}}(),function(){function a(e,t){const n=`get${e}`,r=`set${e}`;return new Proxy(new DataView(x.buffer,t,"Int32"===e?4:8),{get(e,t){if(t===n)return function(n,r){if(!r)throw Error("must be little endian");return e[t](n,r)};if(t===r)return function(n,r,i){if(!i)throw Error("must be little endian");return e[t](n,r,i)};if("string"==typeof t&&t.match(/^(get)|(set)/))throw Error("invalid type");return e[t]}})}function b(e){return D[e>>=2]+D[e+1]*2**32}const e="object"==typeof Ce,t=new Map,n=new Map;i.registerVFS=function(n,r){if(Z("sqlite3_vfs_find","number",["string"],[n.name]))throw Error(`VFS '${n.name}' already registered`);e&&(n.handleAsync=dd);var o=n.cd??64;const s=i._malloc(4);return(r=Z("register_vfs","number",["string","number","number","number"],[n.name,o,r?1:0,s]))||(o=I(s,"*"),t.set(o,n)),i._free(s),r};const r=e?new Set:null;yc=function(t){const i=n.get(t);return e?r.add(t):n.delete(t),i.xClose(t)},Fc=function(e,t,r,i){return n.get(e).xRead(e,x.subarray(t,t+r),b(i))},Kc=function(e,t,r,i){return n.get(e).xWrite(e,x.subarray(t,t+r),b(i))},Ic=function(e,t){return n.get(e).xTruncate(e,b(t))},Hc=function(e,t){return n.get(e).xSync(e,t)},Cc=function(e,t){const r=n.get(e);return t=a("BigInt64",t),r.xFileSize(e,t)},Dc=function(e,t){return n.get(e).xLock(e,t)},Jc=function(e,t){return n.get(e).xUnlock(e,t)},xc=function(e,t){const r=n.get(e);return t=a("Int32",t),r.xCheckReservedLock(e,t)},Bc=function(e,t,r){const i=n.get(e);return r=new DataView(x.buffer,r),i.xFileControl(e,t,r)},Gc=function(e){return n.get(e).xSectorSize(e)},Ac=function(e){return n.get(e).xDeviceCharacteristics(e)},Ec=function(i,o,s,l,f){if(i=t.get(i),n.set(s,i),e)for(var _ of(r.delete(s),r))n.delete(_);if(_=null,64&l){_=1;const e=[];for(;_;){const t=x[o++];if(t)e.push(t);else switch(x[o]||(_=null),_){case 1:e.push(63),_=2;break;case 2:e.push(61),_=3;break;case 3:e.push(38),_=2}}_=(new TextDecoder).decode(new Uint8Array(e))}else o&&(_=o?K(x,o):"");return f=a("Int32",f),i.xOpen(_,s,l,f)},zc=function(e,n,r){return t.get(e).xDelete(n?K(x,n):"",r)},wc=function(e,n,r,i){return e=t.get(e),i=a("Int32",i),e.xAccess(n?K(x,n):"",r,i)}}();var Me={a:(e,t,n,r)=>{u(`Assertion failed: ${e?K(x,e):""}, at: `+[t?t?K(x,t):"":"unknown filename",n,r?r?K(x,r):"":"unknown function"])},K:function(e,t){try{return Db(e=e?K(x,e):"",t),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},M:function(e,t,n){try{if(t=Mb(e,t=t?K(x,t):""),-8&n)return-28;var r=R(t,{$b:!0}).node;return r?(e="",4&n&&(e+="r"),2&n&&(e+="w"),1&n&&(e+="x"),e&&ob(r,e)?-2:0):-44}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},L:function(e,t){try{return Db(S(e).node,t),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},J:function(e){try{var t=S(e).node,n="string"==typeof t?R(t,{$b:!0}).node:t;if(!n.Eb.Sb)throw new fe(63);return n.Eb.Sb(n,{timestamp:Date.now()}),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},b:function(e,t,n){ye=n;try{var r=S(e);switch(t){case 0:var i=Pb();if(0>i)return-28;for(;se[i];)i++;return ub(r,i).Yb;case 1:case 2:case 6:case 7:return 0;case 3:return r.flags;case 4:return i=Pb(),r.flags|=i,0;case 5:return i=Pb(),k[i+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return A[jd()>>2]=28,-1}}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},I:function(e,t){try{return Nb(Bb,S(e).path,t)}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},n:function(e,t,n){t=Qb(t,n);try{if(isNaN(t))return 61;var r=S(e);if(!(2097155&r.flags))throw new fe(28);return Eb(r.node,t),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},C:function(e,t){try{if(0===t)return-28;var n=Ra("/")+1;return t<n?-68:(Sa("/",x,e,t),n)}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},F:function(e,t){try{return Nb(Cb,e=e?K(x,e):"",t)}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},z:function(e,t,n){try{return t=Mb(e,t=t?K(x,t):""),"/"===(t=M(t))[t.length-1]&&(t=t.substr(0,t.length-1)),T(t,n),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},E:function(e,t,n,r){try{return Nb(256&r?Cb:Bb,t=Mb(e,t=t?K(x,t):"",4096&r),n)}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},y:function(e,t,n,r){ye=r;try{return Fb(t=Mb(e,t=t?K(x,t):""),n,r?Pb():0).Yb}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},v:function(e,t,n,r){try{if(t=Mb(e,t=t?K(x,t):""),0>=r)return-28;var i=kb(t),o=Math.min(r,Ra(i)),s=q[n+o];return Sa(i,x,n,r+1),q[n+o]=s,o}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},u:function(e){try{return Ab(e=e?K(x,e):""),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},G:function(e,t){try{return Nb(Bb,e=e?K(x,e):"",t)}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},r:function(e,t,n){try{if(t=Mb(e,t=t?K(x,t):""),0===n){var r=R(e=t,{parent:!0}).node;if(!r)throw new fe(44);var i=Ma(e),o=cb(r,i),s=sb(r,i,!1);if(s)throw new fe(s);if(!r.Eb.qc)throw new fe(63);if(o.bc)throw new fe(10);r.Eb.qc(r,i),nb(o)}else 512===n?Ab(t):u("Invalid flags passed to unlinkat");return 0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},q:function(e,t,n){try{if(t=Mb(e,t=t?K(x,t):"",!0),n){var r=D[n>>2]+4294967296*A[n+4>>2],i=A[n+8>>2];o=1e3*r+i/1e6,s=1e3*(r=D[(n+=16)>>2]+4294967296*A[n+4>>2])+(i=A[n+8>>2])/1e6}else var o=Date.now(),s=o;e=o;var l=R(t,{$b:!0}).node;return l.Eb.Sb(l,{timestamp:Math.max(e,s)}),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},k:function(e,t,n){e=new Date(1e3*Qb(e,t)),A[n>>2]=e.getSeconds(),A[n+4>>2]=e.getMinutes(),A[n+8>>2]=e.getHours(),A[n+12>>2]=e.getDate(),A[n+16>>2]=e.getMonth(),A[n+20>>2]=e.getFullYear()-1900,A[n+24>>2]=e.getDay(),t=e.getFullYear(),A[n+28>>2]=(0!=t%4||0==t%100&&0!=t%400?Ee:ve)[e.getMonth()]+e.getDate()-1|0,A[n+36>>2]=-60*e.getTimezoneOffset(),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var r=new Date(e.getFullYear(),0,1).getTimezoneOffset();A[n+32>>2]=0|(t!=r&&e.getTimezoneOffset()==Math.min(r,t))},i:function(e,t,n,r,i,o,s,l){i=Qb(i,o);try{if(isNaN(i))return 61;var f=S(r);if(2&t&&!(2&n)&&2!=(2097155&f.flags))throw new fe(2);if(1==(2097155&f.flags))throw new fe(2);if(!f.Ob.mc)throw new fe(43);var _=f.Ob.mc(f,e,i,t,n),w=_.Qc;return A[s>>2]=_.Ec,D[l>>2]=w,0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},j:function(e,t,n,r,i,o,s){o=Qb(o,s);try{if(isNaN(o))return 61;var l=S(i);if(2&n){if(32768!=(61440&l.node.mode))throw new fe(43);2&r||l.Ob.nc&&l.Ob.nc(l,x.slice(e,e+t),o,t,r)}}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return-e.Qb}},s:(e,t,n)=>{function d(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var r=(new Date).getFullYear(),i=new Date(r,0,1),o=new Date(r,6,1);r=i.getTimezoneOffset();var s=o.getTimezoneOffset();D[e>>2]=60*Math.max(r,s),A[t>>2]=Number(r!=s),e=d(i),t=d(o),e=Ub(e),t=Ub(t),s<r?(D[n>>2]=e,D[n+4>>2]=t):(D[n>>2]=t,D[n+4>>2]=e)},e:()=>Date.now(),d:()=>performance.now(),o:e=>{var t=x.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var i=Math;r=Math.max(e,r);e:{i=(i.min.call(i,2147483648,r+(65536-r%65536)%65536)-v.buffer.byteLength+65535)/65536;try{v.grow(i),ra();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1},A:(e,t)=>{var n=0;return Xb().forEach(((r,i)=>{var o=t+n;for(i=D[e+4*i>>2]=o,o=0;o<r.length;++o)q[0|i++]=r.charCodeAt(o);q[0|i]=0,n+=r.length+1})),0},B:(e,t)=>{var n=Xb();D[e>>2]=n.length;var r=0;return n.forEach((e=>r+=e.length+1)),D[t>>2]=r,0},f:function(e){try{var t=S(e);if(null===t.Yb)throw new fe(8);t.rc&&(t.rc=null);try{t.Ob.close&&t.Ob.close(t)}catch(e){throw e}finally{se[t.Yb]=null}return t.Yb=null,0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return e.Qb}},p:function(e,t){try{var n=S(e);return q[0|t]=n.Ub?2:P(n.mode)?3:40960==(61440&n.mode)?7:4,k[t+2>>1]=0,j=[0,(H=0,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[t+8>>2]=j[0],A[t+12>>2]=j[1],j=[0,(H=0,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[t+16>>2]=j[0],A[t+20>>2]=j[1],0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return e.Qb}},x:function(e,t,n,r){try{e:{var i=S(e);e=t;for(var o,s=t=0;s<n;s++){var l=D[e>>2],f=D[e+4>>2];e+=8;var _=i,w=l,m=f,p=o,y=q;if(0>m||0>p)throw new fe(28);if(null===_.Yb)throw new fe(8);if(1==(2097155&_.flags))throw new fe(8);if(P(_.node.mode))throw new fe(31);if(!_.Ob.read)throw new fe(28);var g=void 0!==p;if(g){if(!_.seekable)throw new fe(70)}else p=_.position;var v=_.Ob.read(_,y,w,m,p);g||(_.position+=v);var E=v;if(0>E){var x=-1;break e}if(t+=E,E<f)break;void 0!==o&&(o+=E)}x=t}return D[r>>2]=x,0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return e.Qb}},m:function(e,t,n,r,i){t=Qb(t,n);try{if(isNaN(t))return 61;var o=S(e);return Hb(o,t,r),j=[o.position>>>0,(H=o.position,1<=+Math.abs(H)?0<H?+Math.floor(H/4294967296)>>>0:~~+Math.ceil((H-+(~~H>>>0))/4294967296)>>>0:0)],A[i>>2]=j[0],A[i+4>>2]=j[1],o.rc&&0===t&&0===r&&(o.rc=null),0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return e.Qb}},D:function(e){try{var t=S(e);return Zc((e=>{var n=t.node.Wb;n.type.Sc?n.type.Sc(n,!1,(t=>{e(t?29:0)})):e(0)}))}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return e.Qb}},t:function(e,t,n,r){try{e:{var i=S(e);e=t;for(var o,s=t=0;s<n;s++){var l=D[e>>2],f=D[e+4>>2];e+=8;var _=i,w=l,m=f,p=o,y=q;if(0>m||0>p)throw new fe(28);if(null===_.Yb)throw new fe(8);if(!(2097155&_.flags))throw new fe(8);if(P(_.node.mode))throw new fe(31);if(!_.Ob.write)throw new fe(28);_.seekable&&1024&_.flags&&Hb(_,0,2);var g=void 0!==p;if(g){if(!_.seekable)throw new fe(70)}else p=_.position;var v=_.Ob.write(_,y,w,m,p,void 0);g||(_.position+=v);var E=v;if(0>E){var x=-1;break e}t+=E,void 0!==o&&(o+=E)}x=t}return D[r>>2]=x,0}catch(e){if(void 0===pe||"ErrnoError"!==e.name)throw e;return e.Qb}},sa:Yb,O:Zb,ha:$b,ca:ac,Z:bc,H:cc,la:dc,w:ec,g:fc,oa:gc,ja:hc,ea:ic,fa:jc,h:kc,l:lc,pa:mc,ra:nc,qa:oc,da:pc,ga:qc,ia:rc,na:sc,c:tc,ka:uc,ma:vc,aa:wc,V:xc,$:yc,ba:zc,S:Ac,U:Bc,Y:Cc,X:Dc,R:Ec,Q:Fc,T:Gc,_:Hc,N:Ic,W:Jc,P:Kc},Ue=function(){function a(e){if(e=e.exports,Ue=e=function Oc(e){var t,n={};for(t in e)!function(t){var r=e[t];n[t]="function"==typeof r?function(){Re.push(t);try{return r.apply(null,arguments)}finally{O||(Re.pop()===t||u(),Se&&1===xe&&0===Re.length&&(xe=0,Nc(Qc),"undefined"!=typeof Fibers&&Fibers.ed()))}}:r}(t);return n}(e),v=Ue.ta,ra(),N.unshift(Ue.ua),$--,i.monitorRunDependencies&&i.monitorRunDependencies($),0==$&&(null!==W&&(clearInterval(W),W=null),Q)){var t=Q;Q=null,t()}return e}var e={a:Me};if($++,i.monitorRunDependencies&&i.monitorRunDependencies($),i.instantiateWasm)try{return i.instantiateWasm(e,a)}catch(e){y(`Module.instantiateWasm callback failed with error: ${e}`),r(e)}return function Ga(e,t){var n=V;return m||"function"!=typeof WebAssembly.instantiateStreaming||Aa(n)||"function"!=typeof fetch?Fa(n,e,t):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return y(`wasm streaming compile failed: ${r}`),y("falling back to ArrayBuffer instantiation"),Fa(n,e,t)}))))}(e,(function(e){a(e.instance)})).catch(r),{}}();i._sqlite3_vfs_find=e=>(i._sqlite3_vfs_find=Ue.va)(e),i._sqlite3_malloc=e=>(i._sqlite3_malloc=Ue.wa)(e),i._sqlite3_free=e=>(i._sqlite3_free=Ue.xa)(e),i._sqlite3_prepare_v2=(e,t,n,r,o)=>(i._sqlite3_prepare_v2=Ue.ya)(e,t,n,r,o),i._sqlite3_step=e=>(i._sqlite3_step=Ue.za)(e),i._sqlite3_column_int64=(e,t)=>(i._sqlite3_column_int64=Ue.Aa)(e,t),i._sqlite3_column_int=(e,t)=>(i._sqlite3_column_int=Ue.Ba)(e,t),i._sqlite3_finalize=e=>(i._sqlite3_finalize=Ue.Ca)(e),i._sqlite3_reset=e=>(i._sqlite3_reset=Ue.Da)(e),i._sqlite3_clear_bindings=e=>(i._sqlite3_clear_bindings=Ue.Ea)(e),i._sqlite3_value_blob=e=>(i._sqlite3_value_blob=Ue.Fa)(e),i._sqlite3_value_text=e=>(i._sqlite3_value_text=Ue.Ga)(e),i._sqlite3_value_bytes=e=>(i._sqlite3_value_bytes=Ue.Ha)(e),i._sqlite3_value_double=e=>(i._sqlite3_value_double=Ue.Ia)(e),i._sqlite3_value_int=e=>(i._sqlite3_value_int=Ue.Ja)(e),i._sqlite3_value_int64=e=>(i._sqlite3_value_int64=Ue.Ka)(e),i._sqlite3_value_type=e=>(i._sqlite3_value_type=Ue.La)(e),i._sqlite3_result_blob=(e,t,n,r)=>(i._sqlite3_result_blob=Ue.Ma)(e,t,n,r),i._sqlite3_result_double=(e,t)=>(i._sqlite3_result_double=Ue.Na)(e,t),i._sqlite3_result_error=(e,t,n)=>(i._sqlite3_result_error=Ue.Oa)(e,t,n),i._sqlite3_result_int=(e,t)=>(i._sqlite3_result_int=Ue.Pa)(e,t),i._sqlite3_result_int64=(e,t,n)=>(i._sqlite3_result_int64=Ue.Qa)(e,t,n),i._sqlite3_result_null=e=>(i._sqlite3_result_null=Ue.Ra)(e),i._sqlite3_result_text=(e,t,n,r)=>(i._sqlite3_result_text=Ue.Sa)(e,t,n,r),i._sqlite3_column_count=e=>(i._sqlite3_column_count=Ue.Ta)(e),i._sqlite3_data_count=e=>(i._sqlite3_data_count=Ue.Ua)(e),i._sqlite3_column_blob=(e,t)=>(i._sqlite3_column_blob=Ue.Va)(e,t),i._sqlite3_column_bytes=(e,t)=>(i._sqlite3_column_bytes=Ue.Wa)(e,t),i._sqlite3_column_double=(e,t)=>(i._sqlite3_column_double=Ue.Xa)(e,t),i._sqlite3_column_text=(e,t)=>(i._sqlite3_column_text=Ue.Ya)(e,t),i._sqlite3_column_type=(e,t)=>(i._sqlite3_column_type=Ue.Za)(e,t),i._sqlite3_column_name=(e,t)=>(i._sqlite3_column_name=Ue._a)(e,t),i._sqlite3_bind_blob=(e,t,n,r,o)=>(i._sqlite3_bind_blob=Ue.$a)(e,t,n,r,o),i._sqlite3_bind_double=(e,t,n)=>(i._sqlite3_bind_double=Ue.ab)(e,t,n),i._sqlite3_bind_int=(e,t,n)=>(i._sqlite3_bind_int=Ue.bb)(e,t,n),i._sqlite3_bind_int64=(e,t,n,r)=>(i._sqlite3_bind_int64=Ue.cb)(e,t,n,r),i._sqlite3_bind_null=(e,t)=>(i._sqlite3_bind_null=Ue.db)(e,t),i._sqlite3_bind_text=(e,t,n,r,o)=>(i._sqlite3_bind_text=Ue.eb)(e,t,n,r,o),i._sqlite3_bind_parameter_count=e=>(i._sqlite3_bind_parameter_count=Ue.fb)(e),i._sqlite3_bind_parameter_name=(e,t)=>(i._sqlite3_bind_parameter_name=Ue.gb)(e,t),i._sqlite3_sql=e=>(i._sqlite3_sql=Ue.hb)(e),i._sqlite3_exec=(e,t,n,r,o)=>(i._sqlite3_exec=Ue.ib)(e,t,n,r,o),i._sqlite3_errmsg=e=>(i._sqlite3_errmsg=Ue.jb)(e),i._sqlite3_declare_vtab=(e,t)=>(i._sqlite3_declare_vtab=Ue.kb)(e,t),i._sqlite3_libversion=()=>(i._sqlite3_libversion=Ue.lb)(),i._sqlite3_libversion_number=()=>(i._sqlite3_libversion_number=Ue.mb)(),i._sqlite3_changes=e=>(i._sqlite3_changes=Ue.nb)(e),i._sqlite3_close=e=>(i._sqlite3_close=Ue.ob)(e),i._sqlite3_limit=(e,t,n)=>(i._sqlite3_limit=Ue.pb)(e,t,n),i._sqlite3_open_v2=(e,t,n,r)=>(i._sqlite3_open_v2=Ue.qb)(e,t,n,r),i._sqlite3_get_autocommit=e=>(i._sqlite3_get_autocommit=Ue.rb)(e);var jd=()=>(jd=Ue.sb)(),Oe=i._malloc=e=>(Oe=i._malloc=Ue.tb)(e),Fe=i._free=e=>(Fe=i._free=Ue.ub)(e);i._RegisterExtensionFunctions=e=>(i._RegisterExtensionFunctions=Ue.vb)(e),i._set_authorizer=e=>(i._set_authorizer=Ue.wb)(e),i._create_function=(e,t,n,r,o,s)=>(i._create_function=Ue.xb)(e,t,n,r,o,s),i._update_hook=(e,t)=>(i._update_hook=Ue.yb)(e,t),i._create_module=(e,t,n,r)=>(i._create_module=Ue.zb)(e,t,n,r),i._progress_handler=(e,t)=>(i._progress_handler=Ue.Ab)(e,t),i._register_vfs=(e,t,n,r)=>(i._register_vfs=Ue.Bb)(e,t,n,r),i._getSqliteFree=()=>(i._getSqliteFree=Ue.Cb)();var Ne,Be=i._main=(e,t)=>(Be=i._main=Ue.Db)(e,t),db=(e,t)=>(db=Ue.Fb)(e,t),md=()=>(md=Ue.Gb)(),hd=()=>(hd=Ue.Hb)(),fd=e=>(fd=Ue.Ib)(e),gd=e=>(gd=Ue.Jb)(e),ad=e=>(ad=Ue.Kb)(e),Qc=()=>(Qc=Ue.Lb)(),$c=e=>($c=Ue.Mb)(e),bd=()=>(bd=Ue.Nb)();function pd(){function a(){if(!Ne&&(Ne=!0,i.calledRun=!0,!O)){if(i.noFSInit||de||(de=!0,Ib(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?Kb("stdin",i.stdin):zb("/dev/tty","/dev/stdin"),i.stdout?Kb("stdout",null,i.stdout):zb("/dev/tty","/dev/stdout"),i.stderr?Kb("stderr",null,i.stderr):zb("/dev/tty1","/dev/stderr"),Fb("/dev/stdin",0),Fb("/dev/stdout",1),Fb("/dev/stderr",1)),le=!1,Ia(N),Ia(B),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Le){var e=Be;try{var n=e(0,0);E=n,Lc(n)}catch(e){Mc(e)}}if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),L.unshift(e);Ia(L)}}if(!(0<$)){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)xa();Ia(F),0<$||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),a()}),1)):a())}}if(i.getTempRet0=md,i.ccall=Z,i.cwrap=(e,t,n,r)=>{var o=!n||n.every((e=>"number"===e||"boolean"===e));return"string"!==t&&o&&!r?i["_"+e]:function(){return Z(e,t,n,arguments,r)}},i.setValue=J,i.getValue=I,i.UTF8ToString=(e,t)=>e?K(x,e,t):"",i.stringToUTF8=(e,t,n)=>Sa(e,x,t,n),i.lengthBytesUTF8=Ra,Q=function od(){Ne||pd(),Ne||(Q=od)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();var Le=!0;return i.noInitialRun&&(Le=!1),pd(),e.ready}),i=0,o=10,s=21,l=25,f=27,_=100,w=101,m=2,p=4,y=64,g=1,v=2,E=3,q=4,x=5,k=0x7fffffffffffffffn,A=-0x8000000000000000n;class SQLiteError extends Error{constructor(e,t){super(e),this.code=t}}const D=!0;function Factory(e){const t={},n=e._getSqliteFree(),r=e._malloc(8),o=[r,r+4];function createUTF8(t){if("string"!=typeof t)return 0;const n=e.lengthBytesUTF8(t),r=e._sqlite3_malloc(n+1);return e.stringToUTF8(t,r,n+1),r}function cvt32x2ToBigInt(e,t){return BigInt(t)<<32n|0xffffffffn&BigInt(e)}const y=function(){const e=BigInt(Number.MAX_SAFE_INTEGER)>>32n,t=BigInt(Number.MIN_SAFE_INTEGER)>>32n;return function(n,r){return r>e||r<t?cvt32x2ToBigInt(n,r):4294967296*r+(2147483647&n)-(2147483648&n)}}(),C=new Set;function verifyDatabase(e){if(!C.has(e))throw new SQLiteError("not a database",s)}const U=new Map;function verifyStatement(e){if(!U.has(e))throw new SQLiteError("not a statement",s)}t.bind_collection=function(e,n){verifyStatement(e);const r=Array.isArray(n),o=t.bind_parameter_count(e);for(let i=1;i<=o;++i){const o=n[r?i-1:t.bind_parameter_name(e,i)];void 0!==o&&t.bind(e,i,o)}return i},t.bind=function(e,n,r){switch(verifyStatement(e),typeof r){case"number":return r===(0|r)?t.bind_int(e,n,r):t.bind_double(e,n,r);case"string":return t.bind_text(e,n,r);default:return r instanceof Uint8Array||Array.isArray(r)?t.bind_blob(e,n,r):null===r?t.bind_null(e,n):"bigint"==typeof r?t.bind_int64(e,n,r):void 0===r?f:(console.warn("unknown binding converted to null",r),t.bind_null(e,n))}},t.bind_blob=function(){const t="sqlite3_bind_blob",r=e.cwrap(t,...decl("nnnnn:n"));return function(i,o,s){verifyStatement(i);const l=s.byteLength??s.length,f=e._sqlite3_malloc(l);e.HEAPU8.subarray(f).set(s);const _=r(i,o,f,l,n);return check(t,_,U.get(i))}}(),t.bind_parameter_count=function(){const t=e.cwrap("sqlite3_bind_parameter_count",...decl("n:n"));return function(e){verifyStatement(e);return t(e)}}(),t.bind_double=function(){const t="sqlite3_bind_double",n=e.cwrap(t,...decl("nnn:n"));return function(e,r,i){verifyStatement(e);const o=n(e,r,i);return check(t,o,U.get(e))}}(),t.bind_int=function(){const t="sqlite3_bind_int",n=e.cwrap(t,...decl("nnn:n"));return function(e,r,i){if(verifyStatement(e),i>2147483647||i<-2147483648)return l;const o=n(e,r,i);return check(t,o,U.get(e))}}(),t.bind_int64=function(){const t="sqlite3_bind_int64",n=e.cwrap(t,...decl("nnnn:n"));return function(e,r,i){if(verifyStatement(e),i>k||i<A)return l;const o=i>>32n,s=n(e,r,Number(0xffffffffn&i),Number(o));return check(t,s,U.get(e))}}(),t.bind_null=function(){const t="sqlite3_bind_null",n=e.cwrap(t,...decl("nn:n"));return function(e,r){verifyStatement(e);const i=n(e,r);return check(t,i,U.get(e))}}(),t.bind_parameter_name=function(){const t=e.cwrap("sqlite3_bind_parameter_name",...decl("n:s"));return function(e,n){verifyStatement(e);return t(e,n)}}(),t.bind_text=function(){const t="sqlite3_bind_text",r=e.cwrap(t,...decl("nnnnn:n"));return function(e,i,o){verifyStatement(e);const s=createUTF8(o),l=r(e,i,s,-1,n);return check(t,l,U.get(e))}}(),t.changes=function(){const t=e.cwrap("sqlite3_changes",...decl("n:n"));return function(e){verifyDatabase(e);return t(e)}}(),t.close=function(){const t="sqlite3_close",n=e.cwrap(t,...decl("n:n"),{async:D});return async function(e){verifyDatabase(e);const r=await n(e);return C.delete(e),check(t,r,e)}}(),t.column=function(n,r){verifyStatement(n);const i=t.column_type(n,r);switch(i){case q:return t.column_blob(n,r);case v:return t.column_double(n,r);case g:const o=t.column_int(n,r),s=e.getTempRet0();return y(o,s);case x:return null;case E:return t.column_text(n,r);default:throw new SQLiteError("unknown type",i)}},t.column_blob=function(){const n=e.cwrap("sqlite3_column_blob",...decl("nn:n"));return function(r,i){verifyStatement(r);const o=t.column_bytes(r,i),s=n(r,i);return e.HEAPU8.subarray(s,s+o)}}(),t.column_bytes=function(){const t=e.cwrap("sqlite3_column_bytes",...decl("nn:n"));return function(e,n){verifyStatement(e);return t(e,n)}}(),t.column_count=function(){const t=e.cwrap("sqlite3_column_count",...decl("n:n"));return function(e){verifyStatement(e);return t(e)}}(),t.column_double=function(){const t=e.cwrap("sqlite3_column_double",...decl("nn:n"));return function(e,n){verifyStatement(e);return t(e,n)}}(),t.column_int=function(){const t=e.cwrap("sqlite3_column_int64",...decl("nn:n"));return function(e,n){verifyStatement(e);return t(e,n)}}(),t.column_int64=function(){const t=e.cwrap("sqlite3_column_int64",...decl("nn:n"));return function(n,r){verifyStatement(n);return cvt32x2ToBigInt(t(n,r),e.getTempRet0())}}(),t.column_name=function(){const t=e.cwrap("sqlite3_column_name",...decl("nn:s"));return function(e,n){verifyStatement(e);return t(e,n)}}(),t.column_names=function(e){const n=[],r=t.column_count(e);for(let i=0;i<r;++i)n.push(t.column_name(e,i));return n},t.column_text=function(){const t=e.cwrap("sqlite3_column_text",...decl("nn:s"));return function(e,n){verifyStatement(e);return t(e,n)}}(),t.column_type=function(){const t=e.cwrap("sqlite3_column_type",...decl("nn:n"));return function(e,n){verifyStatement(e);return t(e,n)}}(),t.create_function=function(t,n,r,i,o,l,f,_){if(verifyDatabase(t),l&&!f&&!_){return check("sqlite3_create_function",e.createFunction(t,n,r,i,o,l),t)}if(!l&&f&&_){return check("sqlite3_create_function",e.createAggregate(t,n,r,i,o,f,_),t)}throw new SQLiteError("invalid function combination",s)},t.create_module=function(t,n,r,i){verifyDatabase(t);return check("sqlite3_create_module",e.createModule(t,n,r,i),t)},t.data_count=function(){const t=e.cwrap("sqlite3_data_count",...decl("n:n"));return function(e){verifyStatement(e);return t(e)}}(),t.declare_vtab=function(){const t=e.cwrap("sqlite3_declare_vtab",...decl("ns:n"));return function(e,n){return check("sqlite3_declare_vtab",t(e,n))}}(),t.exec=async function(e,n,r){for await(const i of t.statements(e,n)){let e;for(;await t.step(i)===_;)if(r){e=e??t.column_names(i);const n=t.row(i);await r(n,e)}}return i},t.run=async function(e,n,r){for await(const i of t.statements(e,n))r&&t.bind_collection(i,r),await t.step(i);return i},t.execWithParams=async function(e,n,r){let i=[];const o=[];for await(const s of t.statements(e,n))for(r&&t.bind_collection(s,r);await t.step(s)===_;){i=0===i.length?t.column_names(s):i;const e=t.row(s);o.push(e)}return{rows:o,columns:i}},t.executeBatch=async function(e,n,r){try{await t.run(e,"BEGIN EXCLUSIVE TRANSACTION",null);for(let i=0;i<n.length;i++){const o=r?r[i]:null;let s;const l=t.str_new(e,n[i]);try{const n=t.str_value(l);s=await t.prepare_v2(e,n),o&&t.bind_collection(s.stmt,o),await t.step(s.stmt)}finally{s?.stmt&&t.finalize(s.stmt),t.str_finish(l)}}return await t.run(e,"COMMIT",null),i}catch(n){await t.run(e,"ROLLBACK",null)}},t.finalize=function(){const t=e.cwrap("sqlite3_finalize",...decl("n:n"),{async:D});return async function(e){if(!U.has(e))return s;const n=await t(e);U.get(e);return U.delete(e),n}}(),t.get_autocommit=function(){const t=e.cwrap("sqlite3_get_autocommit",...decl("n:n"));return function(e){return t(e)}}(),t.libversion=function(){const t=e.cwrap("sqlite3_libversion",...decl(":s"));return function(){return t()}}(),t.libversion_number=function(){const t=e.cwrap("sqlite3_libversion_number",...decl(":n"));return function(){return t()}}(),t.limit=function(){const t=e.cwrap("sqlite3_limit",...decl("nnn:n"));return function(e,n,r){return t(e,n,r)}}(),t.open_v2=function(){const t="sqlite3_open_v2",n=e.cwrap(t,...decl("snnn:n"),{async:D});return async function(r,i,s){i=i||p|m,s=createUTF8(s);const l=await n(r,o[0],i,s),f=e.getValue(o[0],"*");return C.add(f),e._sqlite3_free(s),e.ccall("RegisterExtensionFunctions","void",["number"],[f]),check(t,l),f}}(),t.prepare_v2=function(){const t="sqlite3_prepare_v2",n=e.cwrap(t,...decl("nnnnn:n"),{async:D});return async function(r,i){const s=await n(r,i,-1,o[0],o[1]);check(t,s,r);const l=e.getValue(o[0],"*");return l?(U.set(l,r),{stmt:l,sql:e.getValue(o[1],"*")}):null}}(),t.progress_handler=function(t,n,r,i){verifyDatabase(t),e.progressHandler(t,n,r,i)},t.reset=function(){const t="sqlite3_reset",n=e.cwrap(t,...decl("n:n"),{async:D});return async function(e){verifyStatement(e);const r=await n(e);return check(t,r,U.get(e))}}(),t.result=function(e,n){switch(typeof n){case"number":n===(0|n)?t.result_int(e,n):t.result_double(e,n);break;case"string":t.result_text(e,n);break;default:if(n instanceof Uint8Array||Array.isArray(n))t.result_blob(e,n);else if(null===n)t.result_null(e);else{if("bigint"==typeof n)return t.result_int64(e,n);console.warn("unknown result converted to null",n),t.result_null(e)}}},t.result_blob=function(){const t=e.cwrap("sqlite3_result_blob",...decl("nnnn:n"));return function(r,i){const o=i.byteLength??i.length,s=e._sqlite3_malloc(o);e.HEAPU8.subarray(s).set(i),t(r,s,o,n)}}(),t.result_double=function(){const t=e.cwrap("sqlite3_result_double",...decl("nn:n"));return function(e,n){t(e,n)}}(),t.result_int=function(){const t=e.cwrap("sqlite3_result_int",...decl("nn:n"));return function(e,n){t(e,n)}}(),t.result_int64=function(){const t=e.cwrap("sqlite3_result_int64",...decl("nnn:n"));return function(e,n){if(n>k||n<A)return l;const r=n>>32n;t(e,Number(0xffffffffn&n),Number(r))}}(),t.result_null=function(){const t=e.cwrap("sqlite3_result_null",...decl("n:n"));return function(e){t(e)}}(),t.result_text=function(){const t=e.cwrap("sqlite3_result_text",...decl("nnnn:n"));return function(e,r){const i=createUTF8(r);t(e,i,-1,n)}}(),t.row=function(n){const r=[],i=t.data_count(n);for(let o=0;o<i;++o){const i=t.column(n,o);r.push(i?.buffer===e.HEAPU8.buffer?i.slice():i)}return r},t.set_authorizer=function(t,n,r){verifyDatabase(t);return check("sqlite3_set_authorizer",e.setAuthorizer(t,n,r),t)},t.sql=function(){const t=e.cwrap("sqlite3_sql",...decl("n:s"));return function(e){verifyStatement(e);return t(e)}}(),t.statements=function(e,n){return async function*(){const r=t.str_new(e,n);let i={stmt:null,sql:t.str_value(r)};try{for(;i=await t.prepare_v2(e,i.sql);)yield i.stmt,t.finalize(i.stmt),i.stmt=null}finally{i?.stmt&&t.finalize(i.stmt),t.str_finish(r)}}()},t.step=function(){const t="sqlite3_step",n=e.cwrap(t,...decl("n:n"),{async:D});return async function(e){verifyStatement(e);const r=await n(e);return check(t,r,U.get(e),[_,w])}}();let O=0;const F=new Map;function check(t,n,r=null,o=[i]){if(o.includes(n))return n;const s=r?e.ccall("sqlite3_errmsg","string",["number"],[r]):t;throw new SQLiteError(s,n)}return t.str_new=function(t,n=""){const r=e.lengthBytesUTF8(n),i=4294967295&O++,o={offset:e._sqlite3_malloc(r+1),bytes:r};return F.set(i,o),e.stringToUTF8(n,o.offset,o.bytes+1),i},t.str_appendall=function(t,n){if(!F.has(t))throw new SQLiteError("not a string",s);const r=F.get(t),i=e.lengthBytesUTF8(n),o=r.bytes+i,l=e._sqlite3_malloc(o+1);e.HEAPU8.subarray(l,l+o+1).set(e.HEAPU8.subarray(r.offset,r.offset+r.bytes)),e.stringToUTF8(n,l+r.bytes,i+1),e._sqlite3_free(r.offset),r.offset=l,r.bytes=o,F.set(t,r)},t.str_finish=function(t){if(!F.has(t))throw new SQLiteError("not a string",s);const n=F.get(t);F.delete(t),e._sqlite3_free(n.offset)},t.str_value=function(e){if(!F.has(e))throw new SQLiteError("not a string",s);return F.get(e).offset},t.update_hook=function(t,n){return verifyDatabase(t),e.updateHook(t,n),i},t.user_data=function(t){return e.getFunctionUserData(t)},t.value=function(n){const r=t.value_type(n);switch(r){case q:return t.value_blob(n);case v:return t.value_double(n);case g:const i=t.value_int(n),o=e.getTempRet0();return y(i,o);case x:return null;case E:return t.value_text(n);default:throw new SQLiteError("unknown type",r)}},t.value_blob=function(){const n=e.cwrap("sqlite3_value_blob",...decl("n:n"));return function(r){const i=t.value_bytes(r),o=n(r);return e.HEAPU8.subarray(o,o+i)}}(),t.value_bytes=function(){const t=e.cwrap("sqlite3_value_bytes",...decl("n:n"));return function(e){return t(e)}}(),t.value_double=function(){const t=e.cwrap("sqlite3_value_double",...decl("n:n"));return function(e){return t(e)}}(),t.value_int=function(){const t=e.cwrap("sqlite3_value_int64",...decl("n:n"));return function(e){return t(e)}}(),t.value_int64=function(){const t=e.cwrap("sqlite3_value_int64",...decl("n:n"));return function(n){return cvt32x2ToBigInt(t(n),e.getTempRet0())}}(),t.value_text=function(){const t=e.cwrap("sqlite3_value_text",...decl("n:s"));return function(e){return t(e)}}(),t.value_type=function(){const t=e.cwrap("sqlite3_value_type",...decl("n:n"));return function(e){return t(e)}}(),t.vfs_register=function(t,n){return check("sqlite3_vfs_register",e.registerVFS(t,n))},t}function decl(e){const t=[],n=e.match(/([ns@]*):([nsv@])/);switch(n[2]){case"n":t.push("number");break;case"s":t.push("string");break;case"v":t.push(null)}const r=[];for(let e of n[1])switch(e){case"n":r.push("number");break;case"s":r.push("string")}return t.push(r),t}class Base{mxPathName=64;xClose(e){return o}xRead(e,t,n){return o}xWrite(e,t,n){return o}xTruncate(e,t){return o}xSync(e,t){return i}xFileSize(e,t){return o}xLock(e,t){return i}xUnlock(e,t){return i}xCheckReservedLock(e,t){return t.setInt32(0,0,!0),i}xFileControl(e,t,n){return 12}xSectorSize(e){return 512}xDeviceCharacteristics(e){return 0}xOpen(e,t,n,r){return 14}xDelete(e,t){return o}xAccess(e,t,n){return o}handleAsync(e){return e()}}[256,2048,512,4096,1024,8192,16384].reduce(((e,t)=>e|t));class WebLocksBase{get state(){return this.#e}#e=0;timeoutMillis=0;#t=new Map;#n=Promise.resolve(0);async lock(e){return this.#r(this.#i,e)}async unlock(e){return this.#r(this.#o,e)}async isSomewhereReserved(){throw new Error("unimplemented")}async#r(e,t){const n=7&t;try{const call=()=>e.call(this,n);return await(this.#n=this.#n.then(call,call)),this.#e=n,i}catch(e){return"AbortError"===e.name?5:(console.error(e),3850)}}async#i(e){if(e===this.#e)return i;switch(this.#e){case 0:if(1===e)return this._NONEtoSHARED();throw new Error(`unexpected transition ${this.#e} -> ${e}`);case 1:switch(e){case 2:return this._SHAREDtoRESERVED();case 4:return this._SHAREDtoEXCLUSIVE();default:throw new Error(`unexpected transition ${this.#e} -> ${e}`)}case 2:if(4===e)return this._RESERVEDtoEXCLUSIVE();throw new Error(`unexpected transition ${this.#e} -> ${e}`);default:throw new Error(`unexpected transition ${this.#e} -> ${e}`)}}async#o(e){if(e===this.#e)return i;switch(this.#e){case 4:switch(e){case 1:return this._EXCLUSIVEtoSHARED();case 0:return this._EXCLUSIVEtoNONE();default:throw new Error(`unexpected transition ${this.#e} -> ${e}`)}case 2:switch(e){case 1:return this._RESERVEDtoSHARED();case 0:return this._RESERVEDtoNONE();default:throw new Error(`unexpected transition ${this.#e} -> ${e}`)}case 1:if(0===e)return this._SHAREDtoNONE();throw new Error(`unexpected transition ${this.#e} -> ${e}`);default:throw new Error(`unexpected transition ${this.#e} -> ${e}`)}}async _NONEtoSHARED(){}async _SHAREDtoEXCLUSIVE(){await this._SHAREDtoRESERVED(),await this._RESERVEDtoEXCLUSIVE()}async _SHAREDtoRESERVED(){}async _RESERVEDtoEXCLUSIVE(){}async _EXCLUSIVEtoRESERVED(){}async _EXCLUSIVEtoSHARED(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED()}async _EXCLUSIVEtoNONE(){await this._EXCLUSIVEtoRESERVED(),await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _RESERVEDtoSHARED(){}async _RESERVEDtoNONE(){await this._RESERVEDtoSHARED(),await this._SHAREDtoNONE()}async _SHAREDtoNONE(){}_acquireWebLock(e,t){return new Promise((async(n,r)=>{try{await navigator.locks.request(e,t,(t=>{if(n(t),t)return new Promise((t=>this.#t.set(e,t)))}))}catch(e){r(e)}}))}_releaseWebLock(e){this.#t.get(e)?.(),this.#t.delete(e)}async _pollWebLock(e){const t=await navigator.locks.query();return t.held.find((({name:t})=>t===e))?.mode}_getTimeoutSignal(){if(this.timeoutMillis){const e=new AbortController;return setTimeout((()=>e.abort()),this.timeoutMillis),e.signal}}}class WebLocksExclusive extends WebLocksBase{constructor(e){super(),this._lockName=e+"-outer",this._reservedName=e+"-reserved"}async isSomewhereReserved(){return"exclusive"===await this._pollWebLock(this._reservedName)}async _NONEtoSHARED(){await this._acquireWebLock(this._lockName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _SHAREDtoRESERVED(){await this._acquireWebLock(this._reservedName,{mode:"exclusive",signal:this._getTimeoutSignal()})}async _RESERVEDtoSHARED(){this._releaseWebLock(this._reservedName)}async _SHAREDtoNONE(){this._releaseWebLock(this._lockName)}}let C=0;const U=new WeakMap;class IDBContext{#a;#s;#c;#u=null;#l=0;#f=Promise.resolve();#b=Promise.resolve();constructor(e,t={durability:"default"}){this.#s=Promise.resolve(e).then((e=>this.#a=e)),this.#c=t}async close(){const e=this.#a??await this.#s;await this.#f,await this.sync(),e.close()}async run(e,t){const n=this.#f.then((()=>this.#d(e,t)));return this.#f=n.catch((()=>{})),n}async#d(e,t){const n=this.#a??await this.#s;if("readwrite"===e&&"readonly"===this.#u?.mode)this.#u=null;else if(performance.now()-this.#l>5e3){try{this.#u?.commit()}catch(e){if("InvalidStateError"!==e.name)throw e}await new Promise((e=>setTimeout(e))),this.#u=null}for(let r=0;r<2;++r){if(!this.#u){this.#u=n.transaction(n.objectStoreNames,e,this.#c);const t=this.#l=performance.now();this.#b=this.#b.then((()=>new Promise(((e,n)=>{this.#u.addEventListener("complete",(t=>{e(),this.#u===t.target&&(this.#u=null),U.get(t.target)})),this.#u.addEventListener("abort",(e=>{console.warn("tx abort",(performance.now()-t)/1e3);const r=e.target.error;n(r),this.#u===e.target&&(this.#u=null),U.get(e.target)}))})))),U.set(this.#u,C++)}try{const e=Object.fromEntries(Array.from(n.objectStoreNames,(e=>[e,new ObjectStore(this.#u.objectStore(e))])));return await t(e)}catch(e){if(this.#u=null,r)throw e}}}async sync(){await this.#f,await this.#b,this.#b=Promise.resolve()}}function wrapRequest(e){return new Promise(((t,n)=>{e.addEventListener("success",(()=>t(e.result))),e.addEventListener("error",(()=>n(e.error)))}))}class ObjectStore{#h;constructor(e){this.#h=e}get(e){this.#h.name;return wrapRequest(this.#h.get(e))}getAll(e,t){this.#h.name;return wrapRequest(this.#h.getAll(e,t))}getKey(e){this.#h.name;return wrapRequest(this.#h.getKey(e))}getAllKeys(e,t){this.#h.name;return wrapRequest(this.#h.getAllKeys(e,t))}put(e,t){this.#h.name;return wrapRequest(this.#h.put(e,t))}delete(e){this.#h.name;return wrapRequest(this.#h.delete(e))}clear(){this.#h.name;return wrapRequest(this.#h.clear())}index(e){return new Index(this.#h.index(e))}}class Index{#_;constructor(e){this.#_=e}getAllKeys(e,t){this.#_.objectStore.name,this.#_.name;return wrapRequest(this.#_.getAllKeys(e,t))}}const O={durability:"default",purge:"deferred",purgeAtLeast:16};class IDBBatchAtomicVFS extends Base{#w;#m=new Map;#p;#y=new Set;#g=performance.now();#v=new Set;constructor(e="wa-sqlite",t=O){super(),this.name=e,this.#w=Object.assign({},O,t),this.#p=new IDBContext(function openDatabase(e){return new Promise(((t,n)=>{const r=globalThis.indexedDB.open(e,5);r.addEventListener("upgradeneeded",(function(){r.result.createObjectStore("blocks",{keyPath:["path","offset","version"]}).createIndex("version",["path","version"])})),r.addEventListener("success",(()=>{t(r.result)})),r.addEventListener("error",(()=>{n(r.error)}))}))}(e),{durability:this.#w.durability})}async close(){for(const e of this.#m.keys())await this.xClose(e);await(this.#p?.close()),this.#p=null}xOpen(e,t,n,r){return this.handleAsync((async()=>{null===e&&(e=`null_${t}`),t.toString(16),n.toString(16);try{const o=new URL(e,"http://localhost/"),s={path:o.pathname,flags:n,block0:null,isMetadataChanged:!0,locks:new WebLocksExclusive(o.pathname)};return this.#m.set(t,s),await this.#p.run("readwrite",(async({blocks:e})=>{if(s.block0=await e.get(this.#E(s,0)),!s.block0){if(!(n&p))throw new Error(`file not found: ${s.path}`);s.block0={path:s.path,offset:0,version:0,data:new Uint8Array(0),fileSize:0},e.put(s.block0)}})),r.setInt32(0,1&n,!0),i}catch(e){return console.error(e),14}}))}xClose(e){return this.handleAsync((async()=>{try{const t=this.#m.get(e);return t&&(t.path,this.#m.delete(e),8&t.flags&&this.#p.run("readwrite",(({blocks:e})=>{e.delete(IDBKeyRange.bound([t.path],[t.path,[]]))}))),i}catch(e){return console.error(e),o}}))}xRead(e,t,n){return this.handleAsync((async()=>{const r=this.#m.get(e);r.path,t.byteLength;try{return await this.#p.run("readonly",(async({blocks:e})=>{let o=0;for(;o<t.byteLength;){const i=n+o,s=i<r.block0.data.byteLength?r.block0:await e.get(this.#E(r,-i));if(!s||s.data.byteLength-s.offset<=i)return t.fill(0,o),522;const l=t.subarray(o),f=i+s.offset,_=Math.min(Math.max(s.data.byteLength-f,0),l.byteLength);l.set(s.data.subarray(f,f+_)),o+=_}return i}))}catch(e){return console.error(e),o}}))}xWrite(e,t,n){const r=this.#v.has(e);if(r||performance.now()-this.#g>3e3){const i=this.handleAsync((async()=>{this.handleAsync!==super.handleAsync&&this.#v.add(e),await new Promise((e=>setTimeout(e)));const r=this.#q(e,t,n);return this.#g=performance.now(),r}));return r&&this.#v.delete(e),i}return this.#q(e,t,n)}#q(e,t,n){const r=this.#m.get(e);r.path,t.byteLength;try{const e=r.block0.fileSize;r.block0.fileSize<n+t.byteLength&&(r.block0.fileSize=n+t.byteLength,r.isMetadataChanged=!0);const o=0===n?r.block0:{path:r.path,offset:-n,version:r.block0.version,data:null};return o.data=t.slice(),r.changedPages?(e===r.block0.fileSize&&r.changedPages.add(-n),0!==n&&this.#p.run("readwrite",(({blocks:e})=>e.put(o)))):this.#p.run("readwrite",(({blocks:e})=>e.put(o))),r.isMetadataChanged=0!==n&&r.isMetadataChanged,i}catch(e){return console.error(e),o}}xTruncate(e,t){const n=this.#m.get(e);n.path;try{Object.assign(n.block0,{fileSize:t,data:n.block0.data.slice(0,t)});const e=Object.assign({},n.block0);return this.#p.run("readwrite",(({blocks:r})=>{r.delete(this.#E(n,-1/0,-t)),r.put(e)})),i}catch(e){return console.error(e),o}}xSync(e,t){const n=this.#v.has(e);if(n||"relaxed"!==this.#w.durability||performance.now()-this.#g>3e3){const r=this.handleAsync((async()=>{this.handleAsync!==super.handleAsync&&this.#v.add(e);const n=await this.#x(e,t);return this.#g=performance.now(),n}));return n&&this.#v.delete(e),r}return this.#m.get(e).path,i}async#x(e,t){const n=this.#m.get(e);n.path;try{n.isMetadataChanged&&(this.#p.run("readwrite",(async({blocks:e})=>{await e.put(n.block0)})),n.isMetadataChanged=!1),await this.#p.sync()}catch(e){return console.error(e),o}return i}xFileSize(e,t){const n=this.#m.get(e);return n.path,t.setBigInt64(0,BigInt(n.block0.fileSize),!0),i}xLock(e,t){return this.handleAsync((async()=>{const n=this.#m.get(e);n.path;try{const e=await n.locks.lock(t);return e===i&&1===n.locks.state&&(n.block0=await this.#p.run("readonly",(({blocks:e})=>e.get(this.#E(n,0))))),e}catch(e){return console.error(e),o}}))}xUnlock(e,t){return this.handleAsync((async()=>{const n=this.#m.get(e);n.path;try{return n.locks.unlock(t)}catch(e){return console.error(e),o}}))}xCheckReservedLock(e,t){return this.handleAsync((async()=>{const n=this.#m.get(e);n.path;const r=await n.locks.isSomewhereReserved();return t.setInt32(0,r?1:0,!0),i}))}xSectorSize(e){return 512}xDeviceCharacteristics(e){return 19968}xFileControl(e,t,n){const r=this.#m.get(e);switch(r.path,t){case 11:return r.overwrite=!0,i;case 21:if(r.overwrite)try{return this.handleAsync((async()=>(await this.#S(r),i)))}catch(e){return console.error(e),o}if(r.isMetadataChanged)try{this.#p.run("readwrite",(async({blocks:e})=>{await e.put(r.block0)})),r.isMetadataChanged=!1}catch(e){return console.error(e),o}return i;case 22:return r.overwrite=!1,i;case 31:return this.handleAsync((async()=>{try{return r.block0.version--,r.changedPages=new Set,this.#p.run("readwrite",(async({blocks:e})=>{const t=await e.index("version").getAllKeys(IDBKeyRange.bound([r.path],[r.path,r.block0.version]));for(const n of t)e.delete(n)})),i}catch(e){return console.error(e),o}}));case 32:try{const e=Object.assign({},r.block0);e.data=e.data.slice();const t=r.changedPages;return r.changedPages=null,r.isMetadataChanged=!1,this.#p.run("readwrite",(async({blocks:n})=>{n.put(e);const i=await n.get([r.path,"purge",0])??{path:r.path,offset:"purge",version:0,data:new Map,count:0};i.count+=t.size;for(const n of t)i.data.set(n,e.version);n.put(i),this.#k(r.path,i.count)})),i}catch(e){return console.error(e),o}case 33:return this.handleAsync((async()=>{try{return r.changedPages=null,r.isMetadataChanged=!1,r.block0=await this.#p.run("readonly",(({blocks:e})=>e.get([r.path,0,r.block0.version+1]))),i}catch(e){return console.error(e),o}}));default:return 12}}xAccess(e,t,n){return this.handleAsync((async()=>{try{const t=new URL(e,"file://localhost/").pathname,r=await this.#p.run("readonly",(({blocks:e})=>e.getKey(this.#E({path:t},0))));return n.setInt32(0,r?1:0,!0),i}catch(e){return console.error(e),o}}))}xDelete(e,t){return this.handleAsync((async()=>{const n=new URL(e,"file://localhost/").pathname;try{return this.#p.run("readwrite",(({blocks:e})=>e.delete(IDBKeyRange.bound([n],[n,[]])))),t&&await this.#p.sync(),i}catch(e){return console.error(e),o}}))}async purge(e){Date.now();await this.#p.run("readwrite",(async({blocks:t})=>{const n=await t.get([e,"purge",0]);if(n){for(const[r,i]of n.data)t.delete(IDBKeyRange.bound([e,r,i],[e,r,1/0],!0,!1));await t.delete([e,"purge",0])}n?.data.size,Date.now()}))}#k(e,t){"manual"===this.#w.purge||this.#y.has(e)||t<this.#w.purgeAtLeast||(globalThis.requestIdleCallback?globalThis.requestIdleCallback((()=>{this.purge(e),this.#y.delete(e)})):setTimeout((()=>{this.purge(e),this.#y.delete(e)})),this.#y.add(e))}#E(e,t,n=0){const r=!t||-t<e.block0.data.length?-1/0:e.block0.version;return IDBKeyRange.bound([e.path,t,r],[e.path,n,1/0])}async#S(e){const t=e.block0.data.length;if(t<18)return;const n=new DataView(e.block0.data.buffer,e.block0.data.byteOffset);let r=n.getUint16(16);if(1===r&&(r=65536),r===t)return;const i=Math.max(t,r),o=i/t,s=i/r,l=n.getUint32(28)*r,f=e.block0.version;await this.#p.run("readwrite",(async({blocks:t})=>{const n=await t.index("version").getAllKeys(IDBKeyRange.bound([e.path,f+1],[e.path,1/0]));for(const e of n)t.delete(e);t.delete([e.path,"purge",0]);for(let n=0;n<l;n+=i){const _=await t.getAll(IDBKeyRange.lowerBound([e.path,-(n+i),1/0]),o);for(const e of _)t.delete([e.path,e.offset,e.version]);if(1===s){const i=new Uint8Array(r);for(const e of _)i.set(e.data,-(n+e.offset));const o={path:e.path,offset:-n,version:f,data:i};0===o.offset&&(o.fileSize=l,e.block0=o),t.put(o)}else{const i=_[0];for(let o=0;o<s;++o){const s=-(n+o*r);if(-s>=l)break;const _={path:i.path,offset:s,version:f,data:i.data.subarray(o*r,(o+1)*r)};0===_.offset&&(_.fileSize=l,e.block0=_),t.put(_)}}}}))}}function resultToRow(e,t){let n=0,r={};for(;n<t.length;)r[e[n]]=t[n],n++;return r}window.sqlite={sqlite3:null,dotNetRef:null,test:function(){console.log("Junk"),async function hello(){return await async function open2(){const e=Factory(await r());e.vfs_register(new IDBBatchAtomicVFS("dbName"));return await e.open_v2("myAppName",p|m|y,"dbName")}()}()},open:async function(e,t){const n=Factory(await r());n.vfs_register(new IDBBatchAtomicVFS(t));const i=await n.open_v2(e,p|m|y,t);return sqlite.sqlite3=n,i},close:async function(e){return await sqlite.sqlite3.close(e)},execute:async function(e,t,n=null){let r={changes:0,response:null,data:"",error:""};for await(const o of sqlite.sqlite3.statements(e,t)){if(null!=n){if(await sqlite.sqlite3.bind_collection(o,n)!=i)return console.error("unable to prepare"),r.error="Unable to Prepare statement. Check your syntax or parameters",r}let t;console.log("Sql: "+sqlite.sqlite3.sql(o));try{for(;await sqlite.sqlite3.step(o)===_;){t=t??sqlite.sqlite3.column_names(o);sqlite.sqlite3.row(o);r.response=response,r.changes=sqlite.sqlite3.changes(e)}}catch(e){console.log(e.message),r.error=e.message}}return r},query:async function(e,t,n=null){let r={result:[]};for await(const o of sqlite.sqlite3.statements(e,t)){if(null!=n){if(await sqlite.sqlite3.bind_collection(o,n)!=i)return console.error("unable to prepare"),null}let e;for(console.log("Sql: "+sqlite.sqlite3.sql(o));await sqlite.sqlite3.step(o)===_;){e=e??sqlite.sqlite3.column_names(o);const t=sqlite.sqlite3.row(o);r.result.push(resultToRow(e,t))}}return r.result},queryold:async function(e,t){let n={result:[]};try{await sqlite.sqlite3.exec(e,t,((e,t)=>{let r=0,i={};for(;r<e.length;)i[t[r]]=e[r],r++;n.result.push(i)}));return console.log(JSON.stringify(n)),n.result}catch(e){console.error(e.message)}}},window.sqliteWasm={}.default})();
//# sourceMappingURL=sqlite.min.js.map